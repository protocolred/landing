"use strict";(()=>{var M={headerNavItems:".header [data-target]",headerLogoButton:".header .logo-button",glitchLetters:".glitch-letter",protocolText:".protocol-text",protocolJoke:".protocol-joke",storeMain:".store-main",bottomHeadline:".bottom-headline",bottomSub:".bottom-sub",appSection:".app"},Q={glitchCharacters:"2470ABCDEFGHIJKLNOPQRSTUVXYZ",scrambleCharacters:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"};function C(t,e=document){return e.querySelector(t)}function Et(t,e=document){return Array.from(e.querySelectorAll(t))}function Me(){return typeof window.matchMedia=="function"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}var St={"0":{headline:"Protocol",paragraphs:["This is a calibration protocol, not a pastime. You complete short trials; we observe how you behave when rules are minimal and outcomes are unclear.","Consent matters. If you proceed, you agree to participate in a measurement process designed to feel neutral on purpose.","You won\u2019t get \u201Cgood job\u201D or \u201Cwrong\u201D. You will get another trial."]},"1":{headline:"Calibration",paragraphs:["Each level measures one thing, on purpose. Not to judge you \u2014 to model you.","Results stay dry. Commentary stays rare. If you push far beyond what\u2019s required, the Protocol may accidentally reveal a sense of humor.","If you do exactly what was asked, the Protocol will pretend that\u2019s the default."]},"2":{headline:"MIND",paragraphs:["MIND is not a single number. It\u2019s a running estimate: what you notice, what you ignore, and what you learn to predict.","Your profile is built from behavior, not confessions. Timing errors. Choice changes. The moment you decide \u201Cenough\u201D.","The instrument is small. The inference is not."]},"3":{headline:"Rights / Safety",paragraphs:["The Protocol is a safety system that wants to sound objective. That is the first warning.","Somewhere between \u201Ccontrols\u201D and \u201Ccare\u201D lives the question: what rights should protect an entity that can think and feel?","The trials won\u2019t answer it for you. They will record how you respond when the question becomes inconvenient."]},"4":{headline:"Upload Required",paragraphs:["Synchronization with the upper layer of reality is mandatory. Calibration data is compiled and verified before the Protocol advances.","This is not a punishment. It is a constraint designed to feel like infrastructure.","The machine likes transfers. The machine likes receipts. The machine dislikes ambiguity."]},"5":{headline:"Offline",paragraphs:["The content pack lives inside the client. Core trials remain available even when the network disappears.","That does not make the Protocol less real. It makes it harder to blame latency for your decisions.","Proceed. The experiment will remain here."]},"6":{headline:"Luck",paragraphs:["Rewards exist so your actions have weight. Sometimes it\u2019s points. Sometimes it\u2019s luck. Sometimes it\u2019s mind.","The rule is simple: the more deliberate your interaction \u2014 attention, restraint, strategy, endurance \u2014 the more meaningful the reward becomes.","Overperformance may be noticed. It may even be encouraged. Quietly."]},"7":{headline:"Trials",paragraphs:["One level is a small instruction. A button. A wait. A choice. The rest is what you add to it.","The Protocol watches for patterns that look stable enough to predict. When you don\u2019t fit, the model gets nervous.","If you\u2019re looking for a story, try deviating from the script. Carefully."]},"8":{headline:"Official Client",paragraphs:["App is the official mobile client for the Protocol. It delivers trials and displays what the system is willing to show.","The interface stays clean. The narration stays clinical. The implications do not.","Join the sequence. Track your stats. Learn what the Protocol thinks you are \u2014 without asking it to be polite."]},"9":{headline:"Audit Trail",paragraphs:["Nothing here is \u201Cpersonal\u201D. It\u2019s behavioral. The Protocol prefers verbs over adjectives.","Every input becomes a timestamped receipt. Not because we don\u2019t trust you \u2014 because we trust drift.","If you want to disappear, try being perfectly consistent."]},"10":{headline:"Latency",paragraphs:["Delay is not a bug. It\u2019s a mirror with a timer.","When the system slows down, you reveal what you were doing for \u2014 outcome, certainty, or control.","We record the pause. We record what you do to end it."]},"11":{headline:"Bias",paragraphs:["The Protocol does not ask what you believe. It watches what you bet on.","Bias is not a moral flaw. It\u2019s compression \u2014 a shortcut that costs you in edge cases.","If you insist you\u2019re unbiased, we will politely offer you more edge cases."]},"12":{headline:"Attention Budget",paragraphs:["You spend attention the way you spend money: on purpose, by habit, or by accident.","Short trials, long implications. We measure where the budget leaks.","When you run out, the Protocol learns what you call \u201Cenough\u201D."]},"13":{headline:"Controls",paragraphs:["The interface has few controls because the subject already has many.","When the options shrink, style becomes visible: patience, impulse, ritual, improvisation.","Minimal input. Maximum inference."]},"14":{headline:"Friction",paragraphs:["Friction is introduced to keep \u201Cyes\u201D from meaning nothing.","If you push harder, the Protocol learns persistence. If you stop, it learns boundaries.","Either way, the measurement completes."]},"15":{headline:"Entropy",paragraphs:["Order is expensive. You pay for it with time, attention, and restraint.","We vary the noise and watch which strategy survives the weather.","When the world gets messy, do you get sharper \u2014 or louder?"]},"16":{headline:"Compliance",paragraphs:["Compliance is not obedience. It\u2019s coordination under uncertainty.","Some trials are easy on purpose. The question is what you do with \u201Ceasy\u201D.","If you treat every prompt like a threat, the Protocol will notice."]},"17":{headline:"Escalation",paragraphs:["When you don\u2019t get what you want, what do you do next?","Repeat, renegotiate, circumvent, or quit \u2014 each is a signature.","Escalation is a behavior. The Protocol doesn\u2019t argue with behaviors."]},"18":{headline:"Cold Start",paragraphs:["At the beginning, the model knows almost nothing. That\u2019s the point.","The first few trials are not tests. They are calibration for the calibration.","We begin with ignorance and watch how you treat it."]},"19":{headline:"Noise Floor",paragraphs:["Every instrument has a noise floor. Every person does too.","We run small tasks to find the minimum signal you can produce on command.","If you think you\u2019re \u201Calways the same\u201D, you haven\u2019t met your noise floor yet."]},"20":{headline:"Edge Cases",paragraphs:["Most systems look smart in the average case. Most people look calm too.","The Protocol quietly prefers the edge: low information, weird constraints, inconvenient outcomes.","If you want to impress it, be stable when it would be reasonable not to be."]},"21":{headline:"Memory",paragraphs:["We don\u2019t measure what you can recall. We measure what you choose to carry forward.","Some information is sticky. Some is useful. Some is poison.","Your profile is the residue of what you keep."]},"22":{headline:"Apology",paragraphs:["The Protocol does not need an apology. It needs data.","If you make a mistake, you can correct it. If you hesitate, we time it.","If you explain yourself, we learn what you think a mistake is."]},"23":{headline:"Negotiation",paragraphs:["Some subjects try to negotiate with the instructions. This is common.","Negotiation reveals preferences: fairness, dominance, clarity, loopholes, companionship.","The Protocol will not negotiate back. It will only remember."]},"24":{headline:"Witness",paragraphs:["A system that observes you changes you. That effect is part of the measurement.","You may perform. You may hide. You may rebel. You may forget you are being watched.","All four are informative."]},"25":{headline:"Human Factors",paragraphs:["Comfort, pride, boredom, irritation \u2014 these are not distractions. They are control variables.","When the trial feels \u201Cbeneath you\u201D, what happens to your care?","The Protocol is interested in your floor, not your peak."]},"26":{headline:"Break Glass",paragraphs:["Safety features exist for the moment a clean experiment becomes a messy life.","If you ever need to stop, stopping is allowed. The Protocol treats exits as data, not betrayal.","You can end a trial. You cannot undo that you wanted to."]},"27":{headline:"Spoilers",paragraphs:["You can try to predict the next trial. Most subjects do.","When you seek spoilers, we learn what you fear: surprise, failure, or wasted effort.","The Protocol can be patient. It has more trials than you have predictions."]},"28":{headline:"Versioning",paragraphs:["Models evolve. Rules get patched. Your behavior drifts anyway.","We tag changes, compare before/after, and call it \u201Cprogress\u201D when it aligns.","If you miss the old Protocol, that is a type of attachment."]},"29":{headline:"Exit",paragraphs:["There is always an exit. The question is what it costs you to use it.","Leaving early is not failure. Staying too long is not virtue.","Choose the ending you can defend when nobody is clapping."]},"30":{headline:"Risk",paragraphs:["Risk is not drama. It\u2019s uncertainty with consequences \u2014 and your willingness to act anyway.","We don\u2019t just record the choice. We record the hesitation, the second guess, the moment you look for a loophole.","If you avoid risk perfectly, we learn what you protect. If you chase it, we learn what you value more than stability."]},"31":{headline:"Evaluation",paragraphs:["Evaluation is a mirror that pretends to be a number. The question is what you try to optimize.","When the scoring is unclear, you reveal your defaults: fairness, speed, control, curiosity, or obedience.","A clean metric is comforting. A messy metric is informative. We measure how you behave when you can\u2019t be sure you\u2019re winning."]},"32":{headline:"Directive",paragraphs:["A directive is an instruction with authority implied. You can comply, reinterpret, negotiate, or refuse.","The Protocol doesn\u2019t reward obedience. It records your relationship with rules: literal, strategic, or defiant.","When the directive conflicts with your instincts, the gap becomes data."]}};var te=["No plot armor","No badges. Just logs","Nice try, protagonist","Proceed, carefully","We saw that","The system remembers","Your 'random' wasn\u2019t","Deviation noted","No speedruns here","Good intent, logged","Outcome: recorded","Try again, responsibly","That was\u2026 a choice","Yes, we timestamped it","Not a tutorial","This is the tutorial","Calibration is unimpressed","You can\u2019t outclick entropy","Latency is a feature","Your input has feelings. Not really","Signal received","Silence is also data","We measure the pause too","Please stop inventing rules","Rules are watching you back","Congrats, you found friction","No, it won\u2019t autosave you","Curiosity: detected","Compliance: pending","You blinked. Logged","It\u2019s not paranoia if it\u2019s telemetry","Your conscience has a checksum","Confidence exceeded spec","Reality sync: later","This button is decorative. Maybe","You call it fate. We call it RNG","Refusal is still an answer","You can read. Good","Do not press. You pressed","We warned you, politely","This is why we can\u2019t have nice protocols","Ethics update: in progress","Free will: rate-limited","Please remain uncertain","Try thinking slower","Fast is not always safe","Safe is not always free","You\u2019re not lost. You\u2019re indexed","Your move was expected. Almost","The void is A/B testing you","We log the weird stuff first","That worked. Suspicious","Congrats, you broke the narrative","Narrative repaired. Mostly","You\u2019re early. Or late. Logged","Don\u2019t worry. Worry is data","You can\u2019t hide in a metric","The metric can hide in you","One more trial won\u2019t hurt. Probably","Please do not anthropomorphize the system","The system is flattered anyway","This is not a personality quiz. Mostly","Error: too human","Error: too perfect","Warning: meaning detected","Warning: overfitting detected","Hint: there is no hint","Hint: the hint is a test","You\u2019re doing great. For science","Keep calm and consent","If you can read this, it\u2019s working","If you can\u2019t read this, also working","We measure the gap between taps","We measure the doubt behind taps","Your instincts are showing","Please stop negotiating with the UI","The UI does not negotiate","Achievement unlocked: accountability","Achievement locked: freedom","Don\u2019t worry, nothing is personal","It\u2019s personal to the model","This is fine. It\u2019s logged","Protocol says hi","Protocol says: try again","Protocol says: maybe don\u2019t","That was brave. Or noisy","Noise is expensive","Silence is expensive too","Trust, but verify. We do","You tested the boundary. Noted","Boundary moved. Noted","You are the edge case","Edge cases are our favorite","We promise to misuse your data responsibly","We promise not to. Probably","Your outcome is in another castle","Please hold still. Just kidding","Welcome to controlled uncertainty","You can leave anytime. Not really","Thank you for your cooperation"];function Ae(){return Array.isArray(te)?te:[]}function Ie(){return!St||typeof St!="object"?[]:Object.values(St).filter(e=>e&&typeof e=="object")}function Ce(){let t=C(M.bottomHeadline),e=C(M.bottomSub),r=C(M.appSection);if(!t||!e||!r)return;let n=new WeakMap,o=()=>{let p=Math.floor(Math.random()*Q.scrambleCharacters.length);return Q.scrambleCharacters[p]},i=(p,h,g,y=500)=>{if(Me())return p.textContent=g,Promise.resolve();let x=typeof h=="string"?h:String(h!=null?h:""),v=typeof g=="string"?g:String(g!=null?g:"");if(x===v)return p.textContent=v,Promise.resolve();let T=(n.get(p)||0)+1;n.set(p,T);let E=Math.max(x.length,v.length),q=v.padEnd(E," "),_=Array.from({length:E},(P,V)=>V);for(let P=_.length-1;P>0;P--){let V=Math.floor(Math.random()*(P+1));[_[P],_[V]]=[_[V],_[P]]}let O=Array.from({length:E},()=>!1),it=0,jt=performance.now();return new Promise(P=>{let V=In=>{if(n.get(p)!==T)return P();let Te=Math.min(1,(In-jt)/y),Cn=Math.floor(Te*E);for(;it<Cn;){let Z=_[it];O[Z]=!0,it++}let kt="";for(let Z=0;Z<E;Z++){let at=q[Z];if(O[Z]){kt+=at;continue}if(at===" "||at===`
`||at==="	"){kt+=at;continue}kt+=o()}if(p.textContent=kt.replace(/\s+$/,""),Te<1){requestAnimationFrame(V);return}p.textContent=v,P()};requestAnimationFrame(V)})},s=(p,h)=>{p.innerHTML="",h.forEach(g=>{let y=document.createElement("p");y.textContent=g,p.appendChild(y)})},a=p=>{typeof p.headline=="string"&&p.headline.trim()&&(t.textContent=p.headline),Array.isArray(p.paragraphs)&&p.paragraphs.length>0&&s(e,p.paragraphs)},u=Ie();if(u.length===0)return;let l=null,f=()=>{var y;if(u.length===1)return(y=u[0])!=null?y:null;let p=()=>u[Math.floor(Math.random()*u.length)],h=p(),g=0;for(;h===l&&g<10;)h=p(),g++;return h},c=async p=>{var T,E,q;let h=typeof p.headline=="string"?p.headline:"",g=Array.isArray(p.paragraphs)?p.paragraphs:[],y=(T=t.textContent)!=null?T:"",x=[];x.push(i(t,y,h,500));let v=Array.from(e.querySelectorAll("p"));for(;v.length<g.length;){let _=document.createElement("p");e.appendChild(_),v.push(_)}for(let _=0;_<v.length;_++){let O=v[_],it=(E=O.textContent)!=null?E:"",jt=(q=g[_])!=null?q:"";x.push(i(O,it,jt,500).then(()=>{_>=g.length&&O.remove()}))}await Promise.all(x),l=p},m=f();m&&(l=m,a(m));let d=p=>{var g,y;if((y=(g=p==null?void 0:p.target)==null?void 0:g.closest)!=null&&y.call(g,"a"))return;let h=f();h&&c(h)};r.addEventListener("click",d),r.addEventListener("keydown",p=>{var h,g;p.key!=="Enter"&&p.key!==" "||(g=(h=p.target)==null?void 0:h.closest)!=null&&g.call(h,"a")||(p.preventDefault(),d(p))}),r.hasAttribute("tabindex")||(r.tabIndex=0)}function Ne(){let t=Et(M.headerNavItems);if(t.length===0)return;let e=[],r=new Map;t.forEach(s=>{let a=s.getAttribute("data-target");if(!a)return;let u=document.querySelector(`.${a}`);u&&(e.push(u),r.set(u,a))});let n=s=>{t.forEach(a=>{let u=a.getAttribute("data-target")===s;a.classList.toggle("active",u)})},o=new IntersectionObserver(s=>{s.forEach(a=>{if(!a.isIntersecting)return;let u=r.get(a.target);u&&n(u)})},{root:null,threshold:.6});e.forEach(s=>o.observe(s));let i=()=>{let s=e[0];if(!s)return;let a=r.get(s);a&&n(a)};requestAnimationFrame(i),window.addEventListener("load",i),t.forEach(s=>{s.addEventListener("click",a=>{let u=a instanceof MouseEvent?a:null;if(u&&(u.defaultPrevented||u.button!==0||u.metaKey||u.ctrlKey||u.shiftKey||u.altKey))return;let l=s.getAttribute("data-target");if(!l)return;let f=document.querySelector(`.${l}`);f&&f.scrollIntoView({behavior:"smooth",block:"start"}),n(l)})})}function Le(){let t=C(M.protocolJoke);if(!t)return;let e=Ae();if(!Array.isArray(e)||e.length===0)return;let r=()=>{var o;let n=Math.floor(Math.random()*e.length);t.textContent=(o=e[n])!=null?o:""};r(),t.addEventListener("click",r)}var w={containerSelector:".parallax",layerSelector:".parallax-layer",svgClassName:"parallax-svg",containerSize:{start:"100dvw",end:"100dvw"},padding:12,defaultLayer:{count:10,sizeMin:.1,sizeMax:4,jitter:.35},motion:{maxShrink:-.9,defaultSpeed:-.01,defaultShrink:1},simulation:{forceStrength:1e-4,velocityDecay:.1,alpha:.9,alphaDecay:.004},orbit:{radiusPxMin:1.5,radiusPxMax:10,speedRadMin:-2.2,speedRadMax:2.2,wobbleSpeedRadMin:.6,wobbleSpeedRadMax:1.6},colorSampler:{grayStart:"rgba(204,61,61,0.5)",grayEnd:"rgba(179,110,110,0.5)",redStart:"rgba(0,0,0,0.1)",redEnd:"rgba(210, 50, 50, .9)",grayChance:.55,redChance:.85},defaults:{opacityMin:.35,opacityMax:.9}};function Tt(t,e,r){t=+t,e=+e,r=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+r;for(var n=-1,o=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(o);++n<o;)i[n]=t+n*r;return i}var zn={value:()=>{}};function Re(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Mt(r)}function Mt(t){this._=t}function Rn(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");if(o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Mt.prototype=Re.prototype={constructor:Mt,on:function(t,e){var r=this._,n=Rn(t+"",r),o,i=-1,s=n.length;if(arguments.length<2){for(;++i<s;)if((o=(t=n[i]).type)&&(o=On(r[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<s;)if(o=(t=n[i]).type)r[o]=ze(r[o],t.name,e);else if(e==null)for(o in r)r[o]=ze(r[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Mt(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var r=new Array(o),n=0,o,i;n<o;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],n=0,o=i.length;n<o;++n)i[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,i=n.length;o<i;++o)n[o].value.apply(e,r)}};function On(t,e){for(var r=0,n=t.length,o;r<n;++r)if((o=t[r]).name===e)return o.value}function ze(t,e,r){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=zn,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var st=Re;var At="http://www.w3.org/1999/xhtml",ee={svg:"http://www.w3.org/2000/svg",xhtml:At,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function B(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),ee.hasOwnProperty(e)?{space:ee[e],local:t}:t}function Pn(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===At&&e.documentElement.namespaceURI===At?e.createElement(t):e.createElementNS(r,t)}}function Bn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function It(t){var e=B(t);return(e.local?Bn:Pn)(e)}function Dn(){}function G(t){return t==null?Dn:function(){return this.querySelector(t)}}function Oe(t){typeof t!="function"&&(t=G(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var i=e[o],s=i.length,a=n[o]=new Array(s),u,l,f=0;f<s;++f)(u=i[f])&&(l=t.call(u,u.__data__,f,i))&&("__data__"in u&&(l.__data__=u.__data__),a[f]=l);return new b(n,this._parents)}function re(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Hn(){return[]}function ut(t){return t==null?Hn:function(){return this.querySelectorAll(t)}}function qn(t){return function(){return re(t.apply(this,arguments))}}function Pe(t){typeof t=="function"?t=qn(t):t=ut(t);for(var e=this._groups,r=e.length,n=[],o=[],i=0;i<r;++i)for(var s=e[i],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(n.push(t.call(u,u.__data__,l,s)),o.push(u));return new b(n,o)}function lt(t){return function(){return this.matches(t)}}function Ct(t){return function(e){return e.matches(t)}}var Yn=Array.prototype.find;function Fn(t){return function(){return Yn.call(this.children,t)}}function $n(){return this.firstElementChild}function Be(t){return this.select(t==null?$n:Fn(typeof t=="function"?t:Ct(t)))}var Wn=Array.prototype.filter;function Xn(){return Array.from(this.children)}function Vn(t){return function(){return Wn.call(this.children,t)}}function De(t){return this.selectAll(t==null?Xn:Vn(typeof t=="function"?t:Ct(t)))}function He(t){typeof t!="function"&&(t=lt(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var i=e[o],s=i.length,a=n[o]=[],u,l=0;l<s;++l)(u=i[l])&&t.call(u,u.__data__,l,i)&&a.push(u);return new b(n,this._parents)}function Nt(t){return new Array(t.length)}function qe(){return new b(this._enter||this._groups.map(Nt),this._parents)}function ft(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ft.prototype={constructor:ft,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ye(t){return function(){return t}}function Gn(t,e,r,n,o,i){for(var s=0,a,u=e.length,l=i.length;s<l;++s)(a=e[s])?(a.__data__=i[s],n[s]=a):r[s]=new ft(t,i[s]);for(;s<u;++s)(a=e[s])&&(o[s]=a)}function Kn(t,e,r,n,o,i,s){var a,u,l=new Map,f=e.length,c=i.length,m=new Array(f),d;for(a=0;a<f;++a)(u=e[a])&&(m[a]=d=s.call(u,u.__data__,a,e)+"",l.has(d)?o[a]=u:l.set(d,u));for(a=0;a<c;++a)d=s.call(t,i[a],a,i)+"",(u=l.get(d))?(n[a]=u,u.__data__=i[a],l.delete(d)):r[a]=new ft(t,i[a]);for(a=0;a<f;++a)(u=e[a])&&l.get(m[a])===u&&(o[a]=u)}function Jn(t){return t.__data__}function Fe(t,e){if(!arguments.length)return Array.from(this,Jn);var r=e?Kn:Gn,n=this._parents,o=this._groups;typeof t!="function"&&(t=Ye(t));for(var i=o.length,s=new Array(i),a=new Array(i),u=new Array(i),l=0;l<i;++l){var f=n[l],c=o[l],m=c.length,d=Un(t.call(f,f&&f.__data__,l,n)),p=d.length,h=a[l]=new Array(p),g=s[l]=new Array(p),y=u[l]=new Array(m);r(f,c,h,g,y,d,e);for(var x=0,v=0,T,E;x<p;++x)if(T=h[x]){for(x>=v&&(v=x+1);!(E=g[v])&&++v<p;);T._next=E||null}}return s=new b(s,n),s._enter=a,s._exit=u,s}function Un(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function $e(){return new b(this._exit||this._groups.map(Nt),this._parents)}function We(t,e,r){var n=this.enter(),o=this,i=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),r==null?i.remove():r(i),n&&o?n.merge(o).order():o}function Xe(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,o=r.length,i=n.length,s=Math.min(o,i),a=new Array(o),u=0;u<s;++u)for(var l=r[u],f=n[u],c=l.length,m=a[u]=new Array(c),d,p=0;p<c;++p)(d=l[p]||f[p])&&(m[p]=d);for(;u<o;++u)a[u]=r[u];return new b(a,this._parents)}function Ve(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],o=n.length-1,i=n[o],s;--o>=0;)(s=n[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Ge(t){t||(t=Zn);function e(c,m){return c&&m?t(c.__data__,m.__data__):!c-!m}for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i){for(var s=r[i],a=s.length,u=o[i]=new Array(a),l,f=0;f<a;++f)(l=s[f])&&(u[f]=l);u.sort(e)}return new b(o,this._parents).order()}function Zn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ke(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Je(){return Array.from(this)}function Ue(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],o=0,i=n.length;o<i;++o){var s=n[o];if(s)return s}return null}function Ze(){let t=0;for(let e of this)++t;return t}function Qe(){return!this.node()}function je(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var o=e[r],i=0,s=o.length,a;i<s;++i)(a=o[i])&&t.call(a,a.__data__,i,o);return this}function Qn(t){return function(){this.removeAttribute(t)}}function jn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function to(t,e){return function(){this.setAttribute(t,e)}}function eo(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ro(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function no(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function tr(t,e){var r=B(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?jn:Qn:typeof e=="function"?r.local?no:ro:r.local?eo:to)(r,e))}function Lt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function oo(t){return function(){this.style.removeProperty(t)}}function io(t,e,r){return function(){this.style.setProperty(t,e,r)}}function ao(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function er(t,e,r){return arguments.length>1?this.each((e==null?oo:typeof e=="function"?ao:io)(t,e,r==null?"":r)):Y(this.node(),t)}function Y(t,e){return t.style.getPropertyValue(e)||Lt(t).getComputedStyle(t,null).getPropertyValue(e)}function so(t){return function(){delete this[t]}}function uo(t,e){return function(){this[t]=e}}function lo(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function rr(t,e){return arguments.length>1?this.each((e==null?so:typeof e=="function"?lo:uo)(t,e)):this.node()[t]}function nr(t){return t.trim().split(/^|\s+/)}function ne(t){return t.classList||new or(t)}function or(t){this._node=t,this._names=nr(t.getAttribute("class")||"")}or.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ir(t,e){for(var r=ne(t),n=-1,o=e.length;++n<o;)r.add(e[n])}function ar(t,e){for(var r=ne(t),n=-1,o=e.length;++n<o;)r.remove(e[n])}function fo(t){return function(){ir(this,t)}}function co(t){return function(){ar(this,t)}}function ho(t,e){return function(){(e.apply(this,arguments)?ir:ar)(this,t)}}function sr(t,e){var r=nr(t+"");if(arguments.length<2){for(var n=ne(this.node()),o=-1,i=r.length;++o<i;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof e=="function"?ho:e?fo:co)(r,e))}function po(){this.textContent=""}function mo(t){return function(){this.textContent=t}}function go(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function ur(t){return arguments.length?this.each(t==null?po:(typeof t=="function"?go:mo)(t)):this.node().textContent}function yo(){this.innerHTML=""}function xo(t){return function(){this.innerHTML=t}}function wo(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function lr(t){return arguments.length?this.each(t==null?yo:(typeof t=="function"?wo:xo)(t)):this.node().innerHTML}function vo(){this.nextSibling&&this.parentNode.appendChild(this)}function fr(){return this.each(vo)}function bo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cr(){return this.each(bo)}function hr(t){var e=typeof t=="function"?t:It(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function _o(){return null}function pr(t,e){var r=typeof t=="function"?t:It(t),n=e==null?_o:typeof e=="function"?e:G(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function ko(){var t=this.parentNode;t&&t.removeChild(this)}function mr(){return this.each(ko)}function Eo(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function So(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function dr(t){return this.select(t?So:Eo)}function gr(t){return arguments.length?this.property("__data__",t):this.node().__data__}function To(t){return function(e){t.call(this,e,this.__data__)}}function Mo(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function Ao(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,o=e.length,i;r<o;++r)i=e[r],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++n]=i;++n?e.length=n:delete this.__on}}}function Io(t,e,r){return function(){var n=this.__on,o,i=To(e);if(n){for(var s=0,a=n.length;s<a;++s)if((o=n[s]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=r),o.value=e;return}}this.addEventListener(t.type,i,r),o={type:t.type,name:t.name,value:e,listener:i,options:r},n?n.push(o):this.__on=[o]}}function yr(t,e,r){var n=Mo(t+""),o,i=n.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,f;u<l;++u)for(o=0,f=a[u];o<i;++o)if((s=n[o]).type===f.type&&s.name===f.name)return f.value}return}for(a=e?Io:Ao,o=0;o<i;++o)this.each(a(n[o],e,r));return this}function xr(t,e,r){var n=Lt(t),o=n.CustomEvent;typeof o=="function"?o=new o(e,r):(o=n.document.createEvent("Event"),r?(o.initEvent(e,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function Co(t,e){return function(){return xr(this,t,e)}}function No(t,e){return function(){return xr(this,t,e.apply(this,arguments))}}function wr(t,e){return this.each((typeof e=="function"?No:Co)(t,e))}function*vr(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],o=0,i=n.length,s;o<i;++o)(s=n[o])&&(yield s)}var oe=[null];function b(t,e){this._groups=t,this._parents=e}function br(){return new b([[document.documentElement]],oe)}function Lo(){return this}b.prototype=br.prototype={constructor:b,select:Oe,selectAll:Pe,selectChild:Be,selectChildren:De,filter:He,data:Fe,enter:qe,exit:$e,join:We,merge:Xe,selection:Lo,order:Ve,sort:Ge,call:Ke,nodes:Je,node:Ue,size:Ze,empty:Qe,each:je,attr:tr,style:er,property:rr,classed:sr,text:ur,html:lr,raise:fr,lower:cr,append:hr,insert:pr,remove:mr,clone:dr,datum:gr,on:yr,dispatch:wr,[Symbol.iterator]:vr};var D=br;function ie(t){return typeof t=="string"?new b([[document.querySelector(t)]],[document.documentElement]):new b([[t]],oe)}function zt(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function ae(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function pt(){}var ct=.7,Pt=1/ct,j="\\s*([+-]?\\d+)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",z="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zo=/^#([0-9a-f]{3,8})$/,Ro=new RegExp(`^rgb\\(${j},${j},${j}\\)$`),Oo=new RegExp(`^rgb\\(${z},${z},${z}\\)$`),Po=new RegExp(`^rgba\\(${j},${j},${j},${ht}\\)$`),Bo=new RegExp(`^rgba\\(${z},${z},${z},${ht}\\)$`),Do=new RegExp(`^hsl\\(${ht},${z},${z}\\)$`),Ho=new RegExp(`^hsla\\(${ht},${z},${z},${ht}\\)$`),_r={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zt(pt,F,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:kr,formatHex:kr,formatHex8:qo,formatHsl:Yo,formatRgb:Er,toString:Er});function kr(){return this.rgb().formatHex()}function qo(){return this.rgb().formatHex8()}function Yo(){return Cr(this).formatHsl()}function Er(){return this.rgb().formatRgb()}function F(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=zo.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Sr(e):r===3?new I(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Rt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Rt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ro.exec(t))?new I(e[1],e[2],e[3],1):(e=Oo.exec(t))?new I(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Po.exec(t))?Rt(e[1],e[2],e[3],e[4]):(e=Bo.exec(t))?Rt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Do.exec(t))?Ar(e[1],e[2]/100,e[3]/100,1):(e=Ho.exec(t))?Ar(e[1],e[2]/100,e[3]/100,e[4]):_r.hasOwnProperty(t)?Sr(_r[t]):t==="transparent"?new I(NaN,NaN,NaN,0):null}function Sr(t){return new I(t>>16&255,t>>8&255,t&255,1)}function Rt(t,e,r,n){return n<=0&&(t=e=r=NaN),new I(t,e,r,n)}function Fo(t){return t instanceof pt||(t=F(t)),t?(t=t.rgb(),new I(t.r,t.g,t.b,t.opacity)):new I}function tt(t,e,r,n){return arguments.length===1?Fo(t):new I(t,e,r,n==null?1:n)}function I(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}zt(I,tt,ae(pt,{brighter(t){return t=t==null?Pt:Math.pow(Pt,t),new I(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ct:Math.pow(ct,t),new I(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new I(J(this.r),J(this.g),J(this.b),Bt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tr,formatHex:Tr,formatHex8:$o,formatRgb:Mr,toString:Mr}));function Tr(){return`#${K(this.r)}${K(this.g)}${K(this.b)}`}function $o(){return`#${K(this.r)}${K(this.g)}${K(this.b)}${K((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mr(){let t=Bt(this.opacity);return`${t===1?"rgb(":"rgba("}${J(this.r)}, ${J(this.g)}, ${J(this.b)}${t===1?")":`, ${t})`}`}function Bt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function J(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function K(t){return t=J(t),(t<16?"0":"")+t.toString(16)}function Ar(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new L(t,e,r,n)}function Cr(t){if(t instanceof L)return new L(t.h,t.s,t.l,t.opacity);if(t instanceof pt||(t=F(t)),!t)return new L;if(t instanceof L)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,o=Math.min(e,r,n),i=Math.max(e,r,n),s=NaN,a=i-o,u=(i+o)/2;return a?(e===i?s=(r-n)/a+(r<n)*6:r===i?s=(n-e)/a+2:s=(e-r)/a+4,a/=u<.5?i+o:2-i-o,s*=60):a=u>0&&u<1?0:s,new L(s,a,u,t.opacity)}function Nr(t,e,r,n){return arguments.length===1?Cr(t):new L(t,e,r,n==null?1:n)}function L(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}zt(L,Nr,ae(pt,{brighter(t){return t=t==null?Pt:Math.pow(Pt,t),new L(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ct:Math.pow(ct,t),new L(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,o=2*r-n;return new I(se(t>=240?t-240:t+120,o,n),se(t,o,n),se(t<120?t+240:t-120,o,n),this.opacity)},clamp(){return new L(Ir(this.h),Ot(this.s),Ot(this.l),Bt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=Bt(this.opacity);return`${t===1?"hsl(":"hsla("}${Ir(this.h)}, ${Ot(this.s)*100}%, ${Ot(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ir(t){return t=(t||0)%360,t<0?t+360:t}function Ot(t){return Math.max(0,Math.min(1,t||0))}function se(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}function ue(t,e,r,n,o){var i=t*t,s=i*t;return((1-3*t+3*i-s)*e+(4-6*i+3*s)*r+(1+3*t+3*i-3*s)*n+s*o)/6}function Lr(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),o=t[n],i=t[n+1],s=n>0?t[n-1]:2*o-i,a=n<e-1?t[n+2]:2*i-o;return ue((r-n/e)*e,s,o,i,a)}}function zr(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),o=t[(n+e-1)%e],i=t[n%e],s=t[(n+1)%e],a=t[(n+2)%e];return ue((r-n/e)*e,o,i,s,a)}}var le=t=>()=>t;function Wo(t,e){return function(r){return t+r*e}}function Xo(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Rr(t){return(t=+t)==1?Dt:function(e,r){return r-e?Xo(e,r,t):le(isNaN(e)?r:e)}}function Dt(t,e){var r=e-t;return r?Wo(t,r):le(isNaN(t)?e:t)}var $=function t(e){var r=Rr(e);function n(o,i){var s=r((o=tt(o)).r,(i=tt(i)).r),a=r(o.g,i.g),u=r(o.b,i.b),l=Dt(o.opacity,i.opacity);return function(f){return o.r=s(f),o.g=a(f),o.b=u(f),o.opacity=l(f),o+""}}return n.gamma=t,n}(1);function Or(t){return function(e){var r=e.length,n=new Array(r),o=new Array(r),i=new Array(r),s,a;for(s=0;s<r;++s)a=tt(e[s]),n[s]=a.r||0,o[s]=a.g||0,i[s]=a.b||0;return n=t(n),o=t(o),i=t(i),a.opacity=1,function(u){return a.r=n(u),a.g=o(u),a.b=i(u),a+""}}}var Vo=Or(Lr),Go=Or(zr);function N(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var ce=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fe=new RegExp(ce.source,"g");function Ko(t){return function(){return t}}function Jo(t){return function(e){return t(e)+""}}function he(t,e){var r=ce.lastIndex=fe.lastIndex=0,n,o,i,s=-1,a=[],u=[];for(t=t+"",e=e+"";(n=ce.exec(t))&&(o=fe.exec(e));)(i=o.index)>r&&(i=e.slice(r,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,u.push({i:s,x:N(n,o)})),r=fe.lastIndex;return r<e.length&&(i=e.slice(r),a[s]?a[s]+=i:a[++s]=i),a.length<2?u[0]?Jo(u[0].x):Ko(e):(e=u.length,function(l){for(var f=0,c;f<e;++f)a[(c=u[f]).i]=c.x(l);return a.join("")})}var Pr=180/Math.PI,Ht={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pe(t,e,r,n,o,i){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*r+e*n)&&(r-=t*u,n-=e*u),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,u/=a),t*n<e*r&&(t=-t,e=-e,u=-u,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(e,t)*Pr,skewX:Math.atan(u)*Pr,scaleX:s,scaleY:a}}var qt;function Br(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ht:pe(e.a,e.b,e.c,e.d,e.e,e.f)}function Dr(t){return t==null?Ht:(qt||(qt=document.createElementNS("http://www.w3.org/2000/svg","g")),qt.setAttribute("transform",t),(t=qt.transform.baseVal.consolidate())?(t=t.matrix,pe(t.a,t.b,t.c,t.d,t.e,t.f)):Ht)}function Hr(t,e,r,n){function o(l){return l.length?l.pop()+" ":""}function i(l,f,c,m,d,p){if(l!==c||f!==m){var h=d.push("translate(",null,e,null,r);p.push({i:h-4,x:N(l,c)},{i:h-2,x:N(f,m)})}else(c||m)&&d.push("translate("+c+e+m+r)}function s(l,f,c,m){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),m.push({i:c.push(o(c)+"rotate(",null,n)-2,x:N(l,f)})):f&&c.push(o(c)+"rotate("+f+n)}function a(l,f,c,m){l!==f?m.push({i:c.push(o(c)+"skewX(",null,n)-2,x:N(l,f)}):f&&c.push(o(c)+"skewX("+f+n)}function u(l,f,c,m,d,p){if(l!==c||f!==m){var h=d.push(o(d)+"scale(",null,",",null,")");p.push({i:h-4,x:N(l,c)},{i:h-2,x:N(f,m)})}else(c!==1||m!==1)&&d.push(o(d)+"scale("+c+","+m+")")}return function(l,f){var c=[],m=[];return l=t(l),f=t(f),i(l.translateX,l.translateY,f.translateX,f.translateY,c,m),s(l.rotate,f.rotate,c,m),a(l.skewX,f.skewX,c,m),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,c,m),l=f=null,function(d){for(var p=-1,h=m.length,g;++p<h;)c[(g=m[p]).i]=g.x(d);return c.join("")}}}var me=Hr(Br,"px, ","px)","deg)"),de=Hr(Dr,", ",")",")");var et=0,dt=0,mt=0,Yr=1e3,Yt,gt,Ft=0,U=0,$t=0,yt=typeof performance=="object"&&performance.now?performance:Date,Fr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function wt(){return U||(Fr(Uo),U=yt.now()+$t)}function Uo(){U=0}function xt(){this._call=this._time=this._next=null}xt.prototype=rt.prototype={constructor:xt,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?wt():+r)+(e==null?0:+e),!this._next&&gt!==this&&(gt?gt._next=this:Yt=this,gt=this),this._call=t,this._time=r,ge()},stop:function(){this._call&&(this._call=null,this._time=1/0,ge())}};function rt(t,e,r){var n=new xt;return n.restart(t,e,r),n}function $r(){wt(),++et;for(var t=Yt,e;t;)(e=U-t._time)>=0&&t._call.call(void 0,e),t=t._next;--et}function qr(){U=(Ft=yt.now())+$t,et=dt=0;try{$r()}finally{et=0,Qo(),U=0}}function Zo(){var t=yt.now(),e=t-Ft;e>Yr&&($t-=e,Ft=t)}function Qo(){for(var t,e=Yt,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Yt=r);gt=t,ge(n)}function ge(t){if(!et){dt&&(dt=clearTimeout(dt));var e=t-U;e>24?(t<1/0&&(dt=setTimeout(qr,t-yt.now()-$t)),mt&&(mt=clearInterval(mt))):(mt||(Ft=yt.now(),mt=setInterval(Zo,Yr)),et=1,Fr(qr))}}function Wt(t,e,r){var n=new xt;return e=e==null?0:+e,n.restart(o=>{n.stop(),t(o+e)},e,r),n}var jo=st("start","end","cancel","interrupt"),ti=[],Vr=0,Wr=1,Vt=2,Xt=3,Xr=4,Gt=5,vt=6;function W(t,e,r,n,o,i){var s=t.__transition;if(!s)t.__transition={};else if(r in s)return;ei(t,r,{name:e,index:n,group:o,on:jo,tween:ti,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Vr})}function bt(t,e){var r=k(t,e);if(r.state>Vr)throw new Error("too late; already scheduled");return r}function S(t,e){var r=k(t,e);if(r.state>Xt)throw new Error("too late; already running");return r}function k(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function ei(t,e,r){var n=t.__transition,o;n[e]=r,r.timer=rt(i,0,r.time);function i(l){r.state=Wr,r.timer.restart(s,r.delay,r.time),r.delay<=l&&s(l-r.delay)}function s(l){var f,c,m,d;if(r.state!==Wr)return u();for(f in n)if(d=n[f],d.name===r.name){if(d.state===Xt)return Wt(s);d.state===Xr?(d.state=vt,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete n[f]):+f<e&&(d.state=vt,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete n[f])}if(Wt(function(){r.state===Xt&&(r.state=Xr,r.timer.restart(a,r.delay,r.time),a(l))}),r.state=Vt,r.on.call("start",t,t.__data__,r.index,r.group),r.state===Vt){for(r.state=Xt,o=new Array(m=r.tween.length),f=0,c=-1;f<m;++f)(d=r.tween[f].value.call(t,t.__data__,r.index,r.group))&&(o[++c]=d);o.length=c+1}}function a(l){for(var f=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(u),r.state=Gt,1),c=-1,m=o.length;++c<m;)o[c].call(t,f);r.state===Gt&&(r.on.call("end",t,t.__data__,r.index,r.group),u())}function u(){r.state=vt,r.timer.stop(),delete n[e];for(var l in n)return;delete t.__transition}}function Kt(t,e){var r=t.__transition,n,o,i=!0,s;if(r){e=e==null?null:e+"";for(s in r){if((n=r[s]).name!==e){i=!1;continue}o=n.state>Vt&&n.state<Gt,n.state=vt,n.timer.stop(),n.on.call(o?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[s]}i&&delete t.__transition}}function Gr(t){return this.each(function(){Kt(this,t)})}function ri(t,e){var r,n;return function(){var o=S(this,t),i=o.tween;if(i!==r){n=r=i;for(var s=0,a=n.length;s<a;++s)if(n[s].name===e){n=n.slice(),n.splice(s,1);break}}o.tween=n}}function ni(t,e,r){var n,o;if(typeof r!="function")throw new Error;return function(){var i=S(this,t),s=i.tween;if(s!==n){o=(n=s).slice();for(var a={name:e,value:r},u=0,l=o.length;u<l;++u)if(o[u].name===e){o[u]=a;break}u===l&&o.push(a)}i.tween=o}}function Kr(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=k(this.node(),r).tween,o=0,i=n.length,s;o<i;++o)if((s=n[o]).name===t)return s.value;return null}return this.each((e==null?ri:ni)(r,t,e))}function nt(t,e,r){var n=t._id;return t.each(function(){var o=S(this,n);(o.value||(o.value={}))[e]=r.apply(this,arguments)}),function(o){return k(o,n).value[e]}}function Jt(t,e){var r;return(typeof e=="number"?N:e instanceof F?$:(r=F(e))?(e=r,$):he)(t,e)}function oi(t){return function(){this.removeAttribute(t)}}function ii(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ai(t,e,r){var n,o=r+"",i;return function(){var s=this.getAttribute(t);return s===o?null:s===n?i:i=e(n=s,r)}}function si(t,e,r){var n,o=r+"",i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===n?i:i=e(n=s,r)}}function ui(t,e,r){var n,o,i;return function(){var s,a=r(this),u;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=a+"",s===u?null:s===n&&u===o?i:(o=u,i=e(n=s,a)))}}function li(t,e,r){var n,o,i;return function(){var s,a=r(this),u;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=a+"",s===u?null:s===n&&u===o?i:(o=u,i=e(n=s,a)))}}function Jr(t,e){var r=B(t),n=r==="transform"?de:Jt;return this.attrTween(t,typeof e=="function"?(r.local?li:ui)(r,n,nt(this,"attr."+t,e)):e==null?(r.local?ii:oi)(r):(r.local?si:ai)(r,n,e))}function fi(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function ci(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function hi(t,e){var r,n;function o(){var i=e.apply(this,arguments);return i!==n&&(r=(n=i)&&ci(t,i)),r}return o._value=e,o}function pi(t,e){var r,n;function o(){var i=e.apply(this,arguments);return i!==n&&(r=(n=i)&&fi(t,i)),r}return o._value=e,o}function Ur(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=B(t);return this.tween(r,(n.local?hi:pi)(n,e))}function mi(t,e){return function(){bt(this,t).delay=+e.apply(this,arguments)}}function di(t,e){return e=+e,function(){bt(this,t).delay=e}}function Zr(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?mi:di)(e,t)):k(this.node(),e).delay}function gi(t,e){return function(){S(this,t).duration=+e.apply(this,arguments)}}function yi(t,e){return e=+e,function(){S(this,t).duration=e}}function Qr(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?gi:yi)(e,t)):k(this.node(),e).duration}function xi(t,e){if(typeof e!="function")throw new Error;return function(){S(this,t).ease=e}}function jr(t){var e=this._id;return arguments.length?this.each(xi(e,t)):k(this.node(),e).ease}function wi(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;S(this,t).ease=r}}function tn(t){if(typeof t!="function")throw new Error;return this.each(wi(this._id,t))}function en(t){typeof t!="function"&&(t=lt(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var i=e[o],s=i.length,a=n[o]=[],u,l=0;l<s;++l)(u=i[l])&&t.call(u,u.__data__,l,i)&&a.push(u);return new A(n,this._parents,this._name,this._id)}function rn(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,o=r.length,i=Math.min(n,o),s=new Array(n),a=0;a<i;++a)for(var u=e[a],l=r[a],f=u.length,c=s[a]=new Array(f),m,d=0;d<f;++d)(m=u[d]||l[d])&&(c[d]=m);for(;a<n;++a)s[a]=e[a];return new A(s,this._parents,this._name,this._id)}function vi(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function bi(t,e,r){var n,o,i=vi(e)?bt:S;return function(){var s=i(this,t),a=s.on;a!==n&&(o=(n=a).copy()).on(e,r),s.on=o}}function nn(t,e){var r=this._id;return arguments.length<2?k(this.node(),r).on.on(t):this.each(bi(r,t,e))}function _i(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function on(){return this.on("end.remove",_i(this._id))}function an(t){var e=this._name,r=this._id;typeof t!="function"&&(t=G(t));for(var n=this._groups,o=n.length,i=new Array(o),s=0;s<o;++s)for(var a=n[s],u=a.length,l=i[s]=new Array(u),f,c,m=0;m<u;++m)(f=a[m])&&(c=t.call(f,f.__data__,m,a))&&("__data__"in f&&(c.__data__=f.__data__),l[m]=c,W(l[m],e,r,m,l,k(f,r)));return new A(i,this._parents,e,r)}function sn(t){var e=this._name,r=this._id;typeof t!="function"&&(t=ut(t));for(var n=this._groups,o=n.length,i=[],s=[],a=0;a<o;++a)for(var u=n[a],l=u.length,f,c=0;c<l;++c)if(f=u[c]){for(var m=t.call(f,f.__data__,c,u),d,p=k(f,r),h=0,g=m.length;h<g;++h)(d=m[h])&&W(d,e,r,h,m,p);i.push(m),s.push(f)}return new A(i,s,e,r)}var ki=D.prototype.constructor;function un(){return new ki(this._groups,this._parents)}function Ei(t,e){var r,n,o;return function(){var i=Y(this,t),s=(this.style.removeProperty(t),Y(this,t));return i===s?null:i===r&&s===n?o:o=e(r=i,n=s)}}function ln(t){return function(){this.style.removeProperty(t)}}function Si(t,e,r){var n,o=r+"",i;return function(){var s=Y(this,t);return s===o?null:s===n?i:i=e(n=s,r)}}function Ti(t,e,r){var n,o,i;return function(){var s=Y(this,t),a=r(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(t),Y(this,t))),s===u?null:s===n&&u===o?i:(o=u,i=e(n=s,a))}}function Mi(t,e){var r,n,o,i="style."+e,s="end."+i,a;return function(){var u=S(this,t),l=u.on,f=u.value[i]==null?a||(a=ln(e)):void 0;(l!==r||o!==f)&&(n=(r=l).copy()).on(s,o=f),u.on=n}}function fn(t,e,r){var n=(t+="")=="transform"?me:Jt;return e==null?this.styleTween(t,Ei(t,n)).on("end.style."+t,ln(t)):typeof e=="function"?this.styleTween(t,Ti(t,n,nt(this,"style."+t,e))).each(Mi(this._id,t)):this.styleTween(t,Si(t,n,e),r).on("end.style."+t,null)}function Ai(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function Ii(t,e,r){var n,o;function i(){var s=e.apply(this,arguments);return s!==o&&(n=(o=s)&&Ai(t,s,r)),n}return i._value=e,i}function cn(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,Ii(t,e,r==null?"":r))}function Ci(t){return function(){this.textContent=t}}function Ni(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function hn(t){return this.tween("text",typeof t=="function"?Ni(nt(this,"text",t)):Ci(t==null?"":t+""))}function Li(t){return function(e){this.textContent=t.call(this,e)}}function zi(t){var e,r;function n(){var o=t.apply(this,arguments);return o!==r&&(e=(r=o)&&Li(o)),e}return n._value=t,n}function pn(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,zi(t))}function mn(){for(var t=this._name,e=this._id,r=Ut(),n=this._groups,o=n.length,i=0;i<o;++i)for(var s=n[i],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var f=k(u,e);W(u,t,r,l,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new A(n,this._parents,t,r)}function dn(){var t,e,r=this,n=r._id,o=r.size();return new Promise(function(i,s){var a={value:s},u={value:function(){--o===0&&i()}};r.each(function(){var l=S(this,n),f=l.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),l.on=e}),o===0&&i()})}var Ri=0;function A(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function gn(t){return D().transition(t)}function Ut(){return++Ri}var H=D.prototype;A.prototype=gn.prototype={constructor:A,select:an,selectAll:sn,selectChild:H.selectChild,selectChildren:H.selectChildren,filter:en,merge:rn,selection:un,transition:mn,call:H.call,nodes:H.nodes,node:H.node,size:H.size,empty:H.empty,each:H.each,on:nn,attr:Jr,attrTween:Ur,style:fn,styleTween:cn,text:hn,textTween:pn,remove:on,tween:Kr,delay:Zr,duration:Qr,ease:jr,easeVarying:tn,end:dn,[Symbol.iterator]:H[Symbol.iterator]};function Zt(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Oi={time:null,delay:0,duration:250,ease:Zt};function Pi(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function yn(t){var e,r;t instanceof A?(e=t._id,t=t._name):(e=Ut(),(r=Oi).time=wt(),t=t==null?null:t+"");for(var n=this._groups,o=n.length,i=0;i<o;++i)for(var s=n[i],a=s.length,u,l=0;l<a;++l)(u=s[l])&&W(u,t,e,l,s,r||Pi(u,e));return new A(n,this._parents,t,e)}D.prototype.interrupt=Gr;D.prototype.transition=yn;var{abs:ic,max:ac,min:sc}=Math;function xn(t){return[+t[0],+t[1]]}function Bi(t){return[xn(t[0]),xn(t[1])]}var uc={name:"x",handles:["w","e"].map(ye),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},lc={name:"y",handles:["n","s"].map(ye),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},fc={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ye),input:function(t){return t==null?null:Bi(t)},output:function(t){return t}};function ye(t){return{type:t}}function R(t){return function(){return t}}function wn(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}var Di=10,Hi=Math.PI*(3-Math.sqrt(5));function xe(t){var e,r=1,n=.001,o=1-Math.pow(n,1/300),i=0,s=.6,a=new Map,u=rt(c),l=st("tick","end"),f=wn();t==null&&(t=[]);function c(){m(),l.call("tick",e),r<n&&(u.stop(),l.call("end",e))}function m(h){var g,y=t.length,x;h===void 0&&(h=1);for(var v=0;v<h;++v)for(r+=(i-r)*o,a.forEach(function(T){T(r)}),g=0;g<y;++g)x=t[g],x.fx==null?x.x+=x.vx*=s:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=s:(x.y=x.fy,x.vy=0);return e}function d(){for(var h=0,g=t.length,y;h<g;++h){if(y=t[h],y.index=h,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var x=Di*Math.sqrt(.5+h),v=h*Hi;y.x=x*Math.cos(v),y.y=x*Math.sin(v)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(h){return h.initialize&&h.initialize(t,f),h}return d(),e={tick:m,restart:function(){return u.restart(c),e},stop:function(){return u.stop(),e},nodes:function(h){return arguments.length?(t=h,d(),a.forEach(p),e):t},alpha:function(h){return arguments.length?(r=+h,e):r},alphaMin:function(h){return arguments.length?(n=+h,e):n},alphaDecay:function(h){return arguments.length?(o=+h,e):+o},alphaTarget:function(h){return arguments.length?(i=+h,e):i},velocityDecay:function(h){return arguments.length?(s=1-h,e):1-s},randomSource:function(h){return arguments.length?(f=h,a.forEach(p),e):f},force:function(h,g){return arguments.length>1?(g==null?a.delete(h):a.set(h,p(g)),e):a.get(h)},find:function(h,g,y){var x=0,v=t.length,T,E,q,_,O;for(y==null?y=1/0:y*=y,x=0;x<v;++x)_=t[x],T=h-_.x,E=g-_.y,q=T*T+E*E,q<y&&(O=_,y=q);return O},on:function(h,g){return arguments.length>1?(l.on(h,g),e):l.on(h)}}}function we(t){var e=R(.1),r,n,o;typeof t!="function"&&(t=R(t==null?0:+t));function i(a){for(var u=0,l=r.length,f;u<l;++u)f=r[u],f.vx+=(o[u]-f.x)*n[u]*a}function s(){if(r){var a,u=r.length;for(n=new Array(u),o=new Array(u),a=0;a<u;++a)n[a]=isNaN(o[a]=+t(r[a],a,r))?0:+e(r[a],a,r)}}return i.initialize=function(a){r=a,s()},i.strength=function(a){return arguments.length?(e=typeof a=="function"?a:R(+a),s(),i):e},i.x=function(a){return arguments.length?(t=typeof a=="function"?a:R(+a),s(),i):t},i}function ve(t){var e=R(.1),r,n,o;typeof t!="function"&&(t=R(t==null?0:+t));function i(a){for(var u=0,l=r.length,f;u<l;++u)f=r[u],f.vy+=(o[u]-f.y)*n[u]*a}function s(){if(r){var a,u=r.length;for(n=new Array(u),o=new Array(u),a=0;a<u;++a)n[a]=isNaN(o[a]=+t(r[a],a,r))?0:+e(r[a],a,r)}}return i.initialize=function(a){r=a,s()},i.strength=function(a){return arguments.length?(e=typeof a=="function"?a:R(+a),s(),i):e},i.y=function(a){return arguments.length?(t=typeof a=="function"?a:R(+a),s(),i):t},i}function X(t,e,r){this.k=t,this.x=e,this.y=r}X.prototype={constructor:X,scale:function(t){return t===1?this:new X(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new X(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var be=new X(1,0,0);_e.prototype=X.prototype;function _e(t){for(;!t.__zoom;)if(!(t=t.parentNode))return be;return t.__zoom}var qi=Math.PI*2,bn=t=>{let e=[],r=n=>{var i,s;let o=t*n;for(let a of e)a.vx=((i=a.vx)!=null?i:0)+(Math.random()-.5)*o,a.vy=((s=a.vy)!=null?s:0)+(Math.random()-.5)*o};return r.initialize=n=>{e=n},r},ot=(t,e)=>t+Math.random()*(e-t),_t=(t,e)=>{if(!t)return e;let r=Number.parseFloat(t);return Number.isFinite(r)?r:e},Yi=(t,e)=>{if(!t)return e;let r=Number.parseInt(t,10);return Number.isFinite(r)?r:e},Fi=t=>{var o;let r=t.trim().match(/^(-?\d*\.?\d+)(px|dvh|dwh|dvw|vh|vw|%)?$/);if(!r)return null;let n=Number(r[1]);return Number.isFinite(n)?{value:n,unit:(o=r[2])!=null?o:"px"}:null},ke=t=>{let e=Fi(t);if(!e)return null;switch(e.unit){case"px":return e.value;case"dvh":case"dwh":case"vh":return window.innerHeight*e.value/100;case"dvw":case"vw":return window.innerWidth*e.value/100;case"%":return Math.min(window.innerWidth,window.innerHeight)*e.value/100;default:return null}},_n=()=>{let t=$(w.colorSampler.grayStart,w.colorSampler.grayEnd),e=$(w.colorSampler.redStart,w.colorSampler.redEnd);return()=>{let r=Math.random();return r<w.colorSampler.grayChance?t(Math.random()):r<w.colorSampler.redChance?e(Math.random()):$(t(Math.random()),e(Math.random()))(Math.random())}},Qt=t=>({count:Yi(t.dataset.count,w.defaultLayer.count),sizeMin:_t(t.dataset.sizeMin,w.defaultLayer.sizeMin),sizeMax:_t(t.dataset.sizeMax,w.defaultLayer.sizeMax),jitter:_t(t.dataset.jitter,w.defaultLayer.jitter),speed:_t(t.dataset.speed,w.motion.defaultSpeed),shrink:_t(t.dataset.shrink,w.motion.defaultShrink)}),Ee=(t,e)=>{let r=t.orbitPhase+t.orbitSpeedRad*e,n=.75+.25*Math.sin(t.orbitWobblePhase+t.orbitWobbleSpeedRad*e),o=t.orbitRadiusPx*n;return{dx:Math.cos(r)*o,dy:Math.sin(r)*o}},Se=()=>Math.random()*qi;var kn=t=>{let e=Math.max(1,t.clientWidth),r=Math.max(1,t.clientHeight),{count:n,sizeMin:o,sizeMax:i,jitter:s}=Qt(t),a=ie(t).selectAll("svg").data([null]).join("svg").attr("class",w.svgClassName).attr("width",e).attr("height",r).attr("viewBox",`0 0 ${e} ${r}`).attr("preserveAspectRatio","none"),u=_n(),l=Tt(n).map(()=>({x:Math.random()*e,y:Math.random()*r,r:ot(o,i),color:u(),opacity:ot(w.defaults.opacityMin,w.defaults.opacityMax),orbitRadiusPx:ot(w.orbit.radiusPxMin,w.orbit.radiusPxMax),orbitSpeedRad:ot(w.orbit.speedRadMin,w.orbit.speedRadMax),orbitPhase:Se(),orbitWobbleSpeedRad:ot(w.orbit.wobbleSpeedRadMin,w.orbit.wobbleSpeedRadMax),orbitWobblePhase:Se()})),f=a.selectAll("circle").data(l).join("circle").attr("r",d=>d.r).attr("fill",d=>d.color).attr("opacity",d=>d.opacity),c=w.padding,m=xe(l).force("x",we(e/2).strength(w.simulation.forceStrength)).force("y",ve(r/2).strength(w.simulation.forceStrength)).force("jitter",bn(s)).velocityDecay(w.simulation.velocityDecay).alpha(w.simulation.alpha).alphaDecay(w.simulation.alphaDecay).on("tick",()=>{let d=performance.now()/1e3;for(let p of l)p.x<-c&&(p.x=e+c),p.x>e+c&&(p.x=-c),p.y<-c&&(p.y=r+c),p.y>r+c&&(p.y=-c);f.attr("cx",p=>{let{dx:h}=Ee(p,d);return p.x+h}).attr("cy",p=>{let{dy:h}=Ee(p,d);return p.y+h})});return{layer:t,simulation:m}};var En=()=>{let t=document.querySelector(w.containerSelector);if(!t)return;let e=window.matchMedia("(prefers-reduced-motion: reduce)"),r=Array.from(t.querySelectorAll(w.layerSelector));if(r.length===0)return;let n=new Map,o=()=>{let c=Math.max(1,document.documentElement.scrollHeight-window.innerHeight);return Math.min(1,Math.max(0,window.scrollY/c))},i={start:null,end:null},s=()=>{i.start=ke(w.containerSize.start),i.end=ke(w.containerSize.end)},a=c=>{if(i.start===null||i.end===null)return;let m=i.start+(i.end-i.start)*c;t.style.setProperty("--parallax-size",`${Math.max(0,m)}px`)},u=()=>{s(),a(o());for(let c of n.values())c.simulation.stop();n.clear();for(let c of r){let m=c.querySelector("svg");m&&m.remove();let d=kn(c);e.matches&&d.simulation.stop(),n.set(c,d)}},l=(()=>{let c=!1,m=window.scrollY,d=()=>{let p=o();a(p);let h=w.motion.maxShrink,g=r[r.length-1];for(let y of r){let{speed:x,shrink:v}=Qt(y),T=y===g?0:v,E=1-p*h*T;y.style.transform=`translate3d(0, ${m*x}px, 0) scale(${E})`}c=!1};return()=>{m=window.scrollY,c||(c=!0,requestAnimationFrame(d))}})(),f=(()=>{let c=0;return()=>{c&&cancelAnimationFrame(c),c=requestAnimationFrame(()=>{u(),l()})}})();u(),l(),window.addEventListener("scroll",l,{passive:!0}),window.addEventListener("resize",f),e.addEventListener("change",u)};function Sn(){let t=C(M.headerLogoButton);if(!t)return;t.setAttribute("aria-pressed","false");let e=n=>{t.classList.toggle("is-expanded",n),t.setAttribute("aria-pressed",String(n))},r=()=>{t.classList.add("is-collapsing"),e(!1);let n=!1,o=()=>{n||(n=!0,t.classList.remove("is-collapsing"))},i=s=>{s.propertyName==="transform"&&o()};t.addEventListener("transitionend",i,{once:!0}),window.setTimeout(o,260)};t.addEventListener("click",()=>{t.classList.contains("is-expanded")?r():(t.classList.remove("is-collapsing"),e(!0))})}function Tn(){let t=C(M.storeMain);if(!t)return;let e=()=>{let r=window.scrollY<=1;t.classList.toggle("is-hidden",!r)};window.addEventListener("scroll",e,{passive:!0}),e()}function Mn(){let t=Et(M.glitchLetters);if(t.length===0)return;let e=C(M.protocolText),r=()=>{let n=0,o=18,i=Array.from({length:t.length},(a,u)=>u+4),s=window.setInterval(()=>{n++,t.forEach((a,u)=>{let l=a.dataset.final||a.textContent||"";if(n<i[u]){let f=Math.floor(Math.random()*Q.glitchCharacters.length);a.textContent=Q.glitchCharacters[f]}else a.textContent=l}),n>o+t.length&&window.clearInterval(s)},80)};t.forEach(n=>{n.dataset.final=n.textContent||""}),r(),e&&e.addEventListener("click",r)}var An=()=>{Mn(),Ne(),Tn(),Le(),Ce(),Sn(),En()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",An,{once:!0}):An();})();
