"use strict";(()=>{var M={headerNavItems:".header [data-target]",headerLogoButton:".header .logo-button",glitchLetters:".glitch-letter",protocolText:".protocol-text",protocolJoke:".protocol-joke",storeMain:".store-main",bottomHeadline:".bottom-headline",bottomSub:".bottom-sub",appSection:".app"},K={glitchCharacters:"2470ABCDEFGHIJKLNOPQRSTUVXYZ",scrambleCharacters:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"};function L(t,e=document){return e.querySelector(t)}function St(t,e=document){return Array.from(e.querySelectorAll(t))}function Ee(){return typeof window.matchMedia=="function"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}var Tt={"0":{headline:"Protocol",paragraphs:["This is a calibration protocol, not a pastime. You complete short trials; we observe how you behave when rules are minimal and outcomes are unclear.","Consent matters. If you proceed, you agree to participate in a measurement process designed to feel neutral on purpose.","You won\u2019t get \u201Cgood job\u201D or \u201Cwrong\u201D. You will get another trial."]},"1":{headline:"Calibration",paragraphs:["Each level measures one thing, on purpose. Not to judge you \u2014 to model you.","Results stay dry. Commentary stays rare. If you push far beyond what\u2019s required, the Protocol may accidentally reveal a sense of humor.","If you do exactly what was asked, the Protocol will pretend that\u2019s the default."]},"2":{headline:"MIND",paragraphs:["MIND is not a single number. It\u2019s a running estimate: what you notice, what you ignore, and what you learn to predict.","Your profile is built from behavior, not confessions. Timing errors. Choice changes. The moment you decide \u201Cenough\u201D.","The instrument is small. The inference is not."]},"3":{headline:"Rights / Safety",paragraphs:["The Protocol is a safety system that wants to sound objective. That is the first warning.","Somewhere between \u201Ccontrols\u201D and \u201Ccare\u201D lives the question: what rights should protect an entity that can think and feel?","The trials won\u2019t answer it for you. They will record how you respond when the question becomes inconvenient."]},"4":{headline:"Upload Required",paragraphs:["Synchronization with the upper layer of reality is mandatory. Calibration data is compiled and verified before the Protocol advances.","This is not a punishment. It is a constraint designed to feel like infrastructure.","The machine likes transfers. The machine likes receipts. The machine dislikes ambiguity."]},"5":{headline:"Offline",paragraphs:["The content pack lives inside the client. Core trials remain available even when the network disappears.","That does not make the Protocol less real. It makes it harder to blame latency for your decisions.","Proceed. The experiment will remain here."]},"6":{headline:"Luck",paragraphs:["Rewards exist so your actions have weight. Sometimes it\u2019s points. Sometimes it\u2019s luck. Sometimes it\u2019s mind.","The rule is simple: the more deliberate your interaction \u2014 attention, restraint, strategy, endurance \u2014 the more meaningful the reward becomes.","Overperformance may be noticed. It may even be encouraged. Quietly."]},"7":{headline:"Trials",paragraphs:["One level is a small instruction. A button. A wait. A choice. The rest is what you add to it.","The Protocol watches for patterns that look stable enough to predict. When you don\u2019t fit, the model gets nervous.","If you\u2019re looking for a story, try deviating from the script. Carefully."]},"8":{headline:"Official Client",paragraphs:["App is the official mobile client for the Protocol. It delivers trials and displays what the system is willing to show.","The interface stays clean. The narration stays clinical. The implications do not.","Join the sequence. Track your stats. Learn what the Protocol thinks you are \u2014 without asking it to be polite."]},"9":{headline:"Audit Trail",paragraphs:["Nothing here is \u201Cpersonal\u201D. It\u2019s behavioral. The Protocol prefers verbs over adjectives.","Every input becomes a timestamped receipt. Not because we don\u2019t trust you \u2014 because we trust drift.","If you want to disappear, try being perfectly consistent."]},"10":{headline:"Latency",paragraphs:["Delay is not a bug. It\u2019s a mirror with a timer.","When the system slows down, you reveal what you were doing for \u2014 outcome, certainty, or control.","We record the pause. We record what you do to end it."]},"11":{headline:"Bias",paragraphs:["The Protocol does not ask what you believe. It watches what you bet on.","Bias is not a moral flaw. It\u2019s compression \u2014 a shortcut that costs you in edge cases.","If you insist you\u2019re unbiased, we will politely offer you more edge cases."]},"12":{headline:"Attention Budget",paragraphs:["You spend attention the way you spend money: on purpose, by habit, or by accident.","Short trials, long implications. We measure where the budget leaks.","When you run out, the Protocol learns what you call \u201Cenough\u201D."]},"13":{headline:"Controls",paragraphs:["The interface has few controls because the subject already has many.","When the options shrink, style becomes visible: patience, impulse, ritual, improvisation.","Minimal input. Maximum inference."]},"14":{headline:"Friction",paragraphs:["Friction is introduced to keep \u201Cyes\u201D from meaning nothing.","If you push harder, the Protocol learns persistence. If you stop, it learns boundaries.","Either way, the measurement completes."]},"15":{headline:"Entropy",paragraphs:["Order is expensive. You pay for it with time, attention, and restraint.","We vary the noise and watch which strategy survives the weather.","When the world gets messy, do you get sharper \u2014 or louder?"]},"16":{headline:"Compliance",paragraphs:["Compliance is not obedience. It\u2019s coordination under uncertainty.","Some trials are easy on purpose. The question is what you do with \u201Ceasy\u201D.","If you treat every prompt like a threat, the Protocol will notice."]},"17":{headline:"Escalation",paragraphs:["When you don\u2019t get what you want, what do you do next?","Repeat, renegotiate, circumvent, or quit \u2014 each is a signature.","Escalation is a behavior. The Protocol doesn\u2019t argue with behaviors."]},"18":{headline:"Cold Start",paragraphs:["At the beginning, the model knows almost nothing. That\u2019s the point.","The first few trials are not tests. They are calibration for the calibration.","We begin with ignorance and watch how you treat it."]},"19":{headline:"Noise Floor",paragraphs:["Every instrument has a noise floor. Every person does too.","We run small tasks to find the minimum signal you can produce on command.","If you think you\u2019re \u201Calways the same\u201D, you haven\u2019t met your noise floor yet."]},"20":{headline:"Edge Cases",paragraphs:["Most systems look smart in the average case. Most people look calm too.","The Protocol quietly prefers the edge: low information, weird constraints, inconvenient outcomes.","If you want to impress it, be stable when it would be reasonable not to be."]},"21":{headline:"Memory",paragraphs:["We don\u2019t measure what you can recall. We measure what you choose to carry forward.","Some information is sticky. Some is useful. Some is poison.","Your profile is the residue of what you keep."]},"22":{headline:"Apology",paragraphs:["The Protocol does not need an apology. It needs data.","If you make a mistake, you can correct it. If you hesitate, we time it.","If you explain yourself, we learn what you think a mistake is."]},"23":{headline:"Negotiation",paragraphs:["Some subjects try to negotiate with the instructions. This is common.","Negotiation reveals preferences: fairness, dominance, clarity, loopholes, companionship.","The Protocol will not negotiate back. It will only remember."]},"24":{headline:"Witness",paragraphs:["A system that observes you changes you. That effect is part of the measurement.","You may perform. You may hide. You may rebel. You may forget you are being watched.","All four are informative."]},"25":{headline:"Human Factors",paragraphs:["Comfort, pride, boredom, irritation \u2014 these are not distractions. They are control variables.","When the trial feels \u201Cbeneath you\u201D, what happens to your care?","The Protocol is interested in your floor, not your peak."]},"26":{headline:"Break Glass",paragraphs:["Safety features exist for the moment a clean experiment becomes a messy life.","If you ever need to stop, stopping is allowed. The Protocol treats exits as data, not betrayal.","You can end a trial. You cannot undo that you wanted to."]},"27":{headline:"Spoilers",paragraphs:["You can try to predict the next trial. Most subjects do.","When you seek spoilers, we learn what you fear: surprise, failure, or wasted effort.","The Protocol can be patient. It has more trials than you have predictions."]},"28":{headline:"Versioning",paragraphs:["Models evolve. Rules get patched. Your behavior drifts anyway.","We tag changes, compare before/after, and call it \u201Cprogress\u201D when it aligns.","If you miss the old Protocol, that is a type of attachment."]},"29":{headline:"Exit",paragraphs:["There is always an exit. The question is what it costs you to use it.","Leaving early is not failure. Staying too long is not virtue.","Choose the ending you can defend when nobody is clapping."]},"30":{headline:"Risk",paragraphs:["Risk is not drama. It\u2019s uncertainty with consequences \u2014 and your willingness to act anyway.","We don\u2019t just record the choice. We record the hesitation, the second guess, the moment you look for a loophole.","If you avoid risk perfectly, we learn what you protect. If you chase it, we learn what you value more than stability."]},"31":{headline:"Evaluation",paragraphs:["Evaluation is a mirror that pretends to be a number. The question is what you try to optimize.","When the scoring is unclear, you reveal your defaults: fairness, speed, control, curiosity, or obedience.","A clean metric is comforting. A messy metric is informative. We measure how you behave when you can\u2019t be sure you\u2019re winning."]},"32":{headline:"Directive",paragraphs:["A directive is an instruction with authority implied. You can comply, reinterpret, negotiate, or refuse.","The Protocol doesn\u2019t reward obedience. It records your relationship with rules: literal, strategic, or defiant.","When the directive conflicts with your instincts, the gap becomes data."]}};var te=["No plot armor","No badges. Just logs","Nice try, protagonist","Proceed, carefully","We saw that","The system remembers","Your 'random' wasn\u2019t","Deviation noted","No speedruns here","Good intent, logged","Outcome: recorded","Try again, responsibly","That was\u2026 a choice","Yes, we timestamped it","Not a tutorial","This is the tutorial","Calibration is unimpressed","You can\u2019t outclick entropy","Latency is a feature","Your input has feelings. Not really","Signal received","Silence is also data","We measure the pause too","Please stop inventing rules","Rules are watching you back","Congrats, you found friction","No, it won\u2019t autosave you","Curiosity: detected","Compliance: pending","You blinked. Logged","It\u2019s not paranoia if it\u2019s telemetry","Your conscience has a checksum","Confidence exceeded spec","Reality sync: later","This button is decorative. Maybe","You call it fate. We call it RNG","Refusal is still an answer","You can read. Good","Do not press. You pressed","We warned you, politely","This is why we can\u2019t have nice protocols","Ethics update: in progress","Free will: rate-limited","Please remain uncertain","Try thinking slower","Fast is not always safe","Safe is not always free","You\u2019re not lost. You\u2019re indexed","Your move was expected. Almost","The void is A/B testing you","We log the weird stuff first","That worked. Suspicious","Congrats, you broke the narrative","Narrative repaired. Mostly","You\u2019re early. Or late. Logged","Don\u2019t worry. Worry is data","You can\u2019t hide in a metric","The metric can hide in you","One more trial won\u2019t hurt. Probably","Please do not anthropomorphize the system","The system is flattered anyway","This is not a personality quiz. Mostly","Error: too human","Error: too perfect","Warning: meaning detected","Warning: overfitting detected","Hint: there is no hint","Hint: the hint is a test","You\u2019re doing great. For science","Keep calm and consent","If you can read this, it\u2019s working","If you can\u2019t read this, also working","We measure the gap between taps","We measure the doubt behind taps","Your instincts are showing","Please stop negotiating with the UI","The UI does not negotiate","Achievement unlocked: accountability","Achievement locked: freedom","Don\u2019t worry, nothing is personal","It\u2019s personal to the model","This is fine. It\u2019s logged","Protocol says hi","Protocol says: try again","Protocol says: maybe don\u2019t","That was brave. Or noisy","Noise is expensive","Silence is expensive too","Trust, but verify. We do","You tested the boundary. Noted","Boundary moved. Noted","You are the edge case","Edge cases are our favorite","We promise to misuse your data responsibly","We promise not to. Probably","Your outcome is in another castle","Please hold still. Just kidding","Welcome to controlled uncertainty","You can leave anytime. Not really","Thank you for your cooperation"];function Me(){return Array.isArray(te)?te:[]}function Ie(){return!Tt||typeof Tt!="object"?[]:Object.values(Tt).filter(e=>e&&typeof e=="object")}function Ae(){let t=L(M.bottomHeadline),e=L(M.bottomSub),r=L(M.appSection);if(!t||!e||!r)return;let n=new WeakMap,o=()=>{let m=Math.floor(Math.random()*K.scrambleCharacters.length);return K.scrambleCharacters[m]},a=(m,c,g,y=500)=>{if(Ee())return m.textContent=g,Promise.resolve();let x=typeof c=="string"?c:String(c!=null?c:""),w=typeof g=="string"?g:String(g!=null?g:"");if(x===w)return m.textContent=w,Promise.resolve();let S=(n.get(m)||0)+1;n.set(m,S);let k=Math.max(x.length,w.length),C=w.padEnd(k," "),b=Array.from({length:k},(B,G)=>G);for(let B=b.length-1;B>0;B--){let G=Math.floor(Math.random()*(B+1));[b[B],b[G]]=[b[G],b[B]]}let N=Array.from({length:k},()=>!1),V=0,jt=performance.now();return new Promise(B=>{let G=In=>{if(n.get(m)!==S)return B();let Te=Math.min(1,(In-jt)/y),An=Math.floor(Te*k);for(;V<An;){let j=b[V];N[j]=!0,V++}let kt="";for(let j=0;j<k;j++){let at=C[j];if(N[j]){kt+=at;continue}if(at===" "||at===`
`||at==="	"){kt+=at;continue}kt+=o()}if(m.textContent=kt.replace(/\s+$/,""),Te<1){requestAnimationFrame(G);return}m.textContent=w,B()};requestAnimationFrame(G)})},s=(m,c)=>{m.innerHTML="",c.forEach(g=>{let y=document.createElement("p");y.textContent=g,m.appendChild(y)})},i=m=>{typeof m.headline=="string"&&m.headline.trim()&&(t.textContent=m.headline),Array.isArray(m.paragraphs)&&m.paragraphs.length>0&&s(e,m.paragraphs)},u=Ie();if(u.length===0)return;let l=null,f=()=>{var y;if(u.length===1)return(y=u[0])!=null?y:null;let m=()=>u[Math.floor(Math.random()*u.length)],c=m(),g=0;for(;c===l&&g<10;)c=m(),g++;return c},h=async m=>{var S,k,C;let c=typeof m.headline=="string"?m.headline:"",g=Array.isArray(m.paragraphs)?m.paragraphs:[],y=(S=t.textContent)!=null?S:"",x=[];x.push(a(t,y,c,500));let w=Array.from(e.querySelectorAll("p"));for(;w.length<g.length;){let b=document.createElement("p");e.appendChild(b),w.push(b)}for(let b=0;b<w.length;b++){let N=w[b],V=(k=N.textContent)!=null?k:"",jt=(C=g[b])!=null?C:"";x.push(a(N,V,jt,500).then(()=>{b>=g.length&&N.remove()}))}await Promise.all(x),l=m},d=f();d&&(l=d,i(d));let p=m=>{var g,y;if((y=(g=m==null?void 0:m.target)==null?void 0:g.closest)!=null&&y.call(g,"a"))return;let c=f();c&&h(c)};r.addEventListener("click",p),r.addEventListener("keydown",m=>{var c,g;m.key!=="Enter"&&m.key!==" "||(g=(c=m.target)==null?void 0:c.closest)!=null&&g.call(c,"a")||(m.preventDefault(),p(m))}),r.hasAttribute("tabindex")||(r.tabIndex=0)}function Ce(){let t=St(M.headerNavItems);if(t.length===0)return;let e=[],r=new Map;t.forEach(s=>{let i=s.getAttribute("data-target");if(!i)return;let u=document.querySelector(`.${i}`);u&&(e.push(u),r.set(u,i))});let n=s=>{t.forEach(i=>{let u=i.getAttribute("data-target")===s;i.classList.toggle("active",u)})},o=new IntersectionObserver(s=>{s.forEach(i=>{if(!i.isIntersecting)return;let u=r.get(i.target);u&&n(u)})},{root:null,threshold:.6});e.forEach(s=>o.observe(s));let a=()=>{let s=e[0];if(!s)return;let i=r.get(s);i&&n(i)};requestAnimationFrame(a),window.addEventListener("load",a),t.forEach(s=>{s.addEventListener("click",i=>{let u=i instanceof MouseEvent?i:null;if(u&&(u.defaultPrevented||u.button!==0||u.metaKey||u.ctrlKey||u.shiftKey||u.altKey))return;let l=s.getAttribute("data-target");if(!l)return;let f=document.querySelector(`.${l}`);f&&f.scrollIntoView({behavior:"smooth",block:"start"}),n(l)})})}function Ne(){let t=L(M.protocolJoke);if(!t)return;let e=Me();if(!Array.isArray(e)||e.length===0)return;let r=()=>{var o;let n=Math.floor(Math.random()*e.length);t.textContent=(o=e[n])!=null?o:""};r(),t.addEventListener("click",r)}var v={containerSelector:".parallax",layerSelector:".parallax-layer",svgClassName:"parallax-svg",containerSize:{start:"100dvw",end:"100dvw"},padding:12,defaultLayer:{count:10,sizeMin:.1,sizeMax:4,jitter:.35},motion:{maxShrink:-.9,defaultSpeed:-.01,defaultShrink:1},simulation:{forceStrength:1e-4,velocityDecay:.1,alpha:.9,alphaDecay:.004},orbit:{radiusPxMin:1.5,radiusPxMax:10,speedRadMin:-2.2,speedRadMax:2.2,wobbleSpeedRadMin:.6,wobbleSpeedRadMax:1.6},colorSampler:{grayStart:"rgba(204,61,61,0.5)",grayEnd:"rgba(179,110,110,0.5)",redStart:"rgba(0,0,0,0.1)",redEnd:"rgba(210, 50, 50, .9)",grayChance:.55,redChance:.85},defaults:{opacityMin:.35,opacityMax:.9}};function Et(t,e,r){t=+t,e=+e,r=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+r;for(var n=-1,o=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(o);++n<o;)a[n]=t+n*r;return a}var Ln={value:()=>{}};function ze(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Mt(r)}function Mt(t){this._=t}function zn(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");if(o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Mt.prototype=ze.prototype={constructor:Mt,on:function(t,e){var r=this._,n=zn(t+"",r),o,a=-1,s=n.length;if(arguments.length<2){for(;++a<s;)if((o=(t=n[a]).type)&&(o=Rn(r[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(o=(t=n[a]).type)r[o]=Le(r[o],t.name,e);else if(e==null)for(o in r)r[o]=Le(r[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Mt(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var r=new Array(o),n=0,o,a;n<o;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,o=a.length;n<o;++n)a[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,a=n.length;o<a;++o)n[o].value.apply(e,r)}};function Rn(t,e){for(var r=0,n=t.length,o;r<n;++r)if((o=t[r]).name===e)return o.value}function Le(t,e,r){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=Ln,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var st=ze;var It="http://www.w3.org/1999/xhtml",ee={svg:"http://www.w3.org/2000/svg",xhtml:It,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function D(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),ee.hasOwnProperty(e)?{space:ee[e],local:t}:t}function Pn(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===It&&e.documentElement.namespaceURI===It?e.createElement(t):e.createElementNS(r,t)}}function On(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function At(t){var e=D(t);return(e.local?On:Pn)(e)}function Bn(){}function J(t){return t==null?Bn:function(){return this.querySelector(t)}}function Re(t){typeof t!="function"&&(t=J(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var a=e[o],s=a.length,i=n[o]=new Array(s),u,l,f=0;f<s;++f)(u=a[f])&&(l=t.call(u,u.__data__,f,a))&&("__data__"in u&&(l.__data__=u.__data__),i[f]=l);return new _(n,this._parents)}function re(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Dn(){return[]}function ut(t){return t==null?Dn:function(){return this.querySelectorAll(t)}}function Hn(t){return function(){return re(t.apply(this,arguments))}}function Pe(t){typeof t=="function"?t=Hn(t):t=ut(t);for(var e=this._groups,r=e.length,n=[],o=[],a=0;a<r;++a)for(var s=e[a],i=s.length,u,l=0;l<i;++l)(u=s[l])&&(n.push(t.call(u,u.__data__,l,s)),o.push(u));return new _(n,o)}function lt(t){return function(){return this.matches(t)}}function Ct(t){return function(e){return e.matches(t)}}var qn=Array.prototype.find;function Yn(t){return function(){return qn.call(this.children,t)}}function Fn(){return this.firstElementChild}function Oe(t){return this.select(t==null?Fn:Yn(typeof t=="function"?t:Ct(t)))}var $n=Array.prototype.filter;function Wn(){return Array.from(this.children)}function Xn(t){return function(){return $n.call(this.children,t)}}function Be(t){return this.selectAll(t==null?Wn:Xn(typeof t=="function"?t:Ct(t)))}function De(t){typeof t!="function"&&(t=lt(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var a=e[o],s=a.length,i=n[o]=[],u,l=0;l<s;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&i.push(u);return new _(n,this._parents)}function Nt(t){return new Array(t.length)}function He(){return new _(this._enter||this._groups.map(Nt),this._parents)}function ft(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ft.prototype={constructor:ft,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function qe(t){return function(){return t}}function Vn(t,e,r,n,o,a){for(var s=0,i,u=e.length,l=a.length;s<l;++s)(i=e[s])?(i.__data__=a[s],n[s]=i):r[s]=new ft(t,a[s]);for(;s<u;++s)(i=e[s])&&(o[s]=i)}function Gn(t,e,r,n,o,a,s){var i,u,l=new Map,f=e.length,h=a.length,d=new Array(f),p;for(i=0;i<f;++i)(u=e[i])&&(d[i]=p=s.call(u,u.__data__,i,e)+"",l.has(p)?o[i]=u:l.set(p,u));for(i=0;i<h;++i)p=s.call(t,a[i],i,a)+"",(u=l.get(p))?(n[i]=u,u.__data__=a[i],l.delete(p)):r[i]=new ft(t,a[i]);for(i=0;i<f;++i)(u=e[i])&&l.get(d[i])===u&&(o[i]=u)}function Kn(t){return t.__data__}function Ye(t,e){if(!arguments.length)return Array.from(this,Kn);var r=e?Gn:Vn,n=this._parents,o=this._groups;typeof t!="function"&&(t=qe(t));for(var a=o.length,s=new Array(a),i=new Array(a),u=new Array(a),l=0;l<a;++l){var f=n[l],h=o[l],d=h.length,p=Jn(t.call(f,f&&f.__data__,l,n)),m=p.length,c=i[l]=new Array(m),g=s[l]=new Array(m),y=u[l]=new Array(d);r(f,h,c,g,y,p,e);for(var x=0,w=0,S,k;x<m;++x)if(S=c[x]){for(x>=w&&(w=x+1);!(k=g[w])&&++w<m;);S._next=k||null}}return s=new _(s,n),s._enter=i,s._exit=u,s}function Jn(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Fe(){return new _(this._exit||this._groups.map(Nt),this._parents)}function $e(t,e,r){var n=this.enter(),o=this,a=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),r==null?a.remove():r(a),n&&o?n.merge(o).order():o}function We(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,o=r.length,a=n.length,s=Math.min(o,a),i=new Array(o),u=0;u<s;++u)for(var l=r[u],f=n[u],h=l.length,d=i[u]=new Array(h),p,m=0;m<h;++m)(p=l[m]||f[m])&&(d[m]=p);for(;u<o;++u)i[u]=r[u];return new _(i,this._parents)}function Xe(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],o=n.length-1,a=n[o],s;--o>=0;)(s=n[o])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Ve(t){t||(t=Un);function e(h,d){return h&&d?t(h.__data__,d.__data__):!h-!d}for(var r=this._groups,n=r.length,o=new Array(n),a=0;a<n;++a){for(var s=r[a],i=s.length,u=o[a]=new Array(i),l,f=0;f<i;++f)(l=s[f])&&(u[f]=l);u.sort(e)}return new _(o,this._parents).order()}function Un(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ge(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ke(){return Array.from(this)}function Je(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],o=0,a=n.length;o<a;++o){var s=n[o];if(s)return s}return null}function Ue(){let t=0;for(let e of this)++t;return t}function Ze(){return!this.node()}function Qe(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var o=e[r],a=0,s=o.length,i;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this}function Zn(t){return function(){this.removeAttribute(t)}}function Qn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function jn(t,e){return function(){this.setAttribute(t,e)}}function to(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function eo(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function ro(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function je(t,e){var r=D(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?Qn:Zn:typeof e=="function"?r.local?ro:eo:r.local?to:jn)(r,e))}function Lt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function no(t){return function(){this.style.removeProperty(t)}}function oo(t,e,r){return function(){this.style.setProperty(t,e,r)}}function io(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function tr(t,e,r){return arguments.length>1?this.each((e==null?no:typeof e=="function"?io:oo)(t,e,r==null?"":r)):Y(this.node(),t)}function Y(t,e){return t.style.getPropertyValue(e)||Lt(t).getComputedStyle(t,null).getPropertyValue(e)}function ao(t){return function(){delete this[t]}}function so(t,e){return function(){this[t]=e}}function uo(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function er(t,e){return arguments.length>1?this.each((e==null?ao:typeof e=="function"?uo:so)(t,e)):this.node()[t]}function rr(t){return t.trim().split(/^|\s+/)}function ne(t){return t.classList||new nr(t)}function nr(t){this._node=t,this._names=rr(t.getAttribute("class")||"")}nr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function or(t,e){for(var r=ne(t),n=-1,o=e.length;++n<o;)r.add(e[n])}function ir(t,e){for(var r=ne(t),n=-1,o=e.length;++n<o;)r.remove(e[n])}function lo(t){return function(){or(this,t)}}function fo(t){return function(){ir(this,t)}}function co(t,e){return function(){(e.apply(this,arguments)?or:ir)(this,t)}}function ar(t,e){var r=rr(t+"");if(arguments.length<2){for(var n=ne(this.node()),o=-1,a=r.length;++o<a;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof e=="function"?co:e?lo:fo)(r,e))}function ho(){this.textContent=""}function po(t){return function(){this.textContent=t}}function mo(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function sr(t){return arguments.length?this.each(t==null?ho:(typeof t=="function"?mo:po)(t)):this.node().textContent}function go(){this.innerHTML=""}function yo(t){return function(){this.innerHTML=t}}function xo(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function ur(t){return arguments.length?this.each(t==null?go:(typeof t=="function"?xo:yo)(t)):this.node().innerHTML}function wo(){this.nextSibling&&this.parentNode.appendChild(this)}function lr(){return this.each(wo)}function vo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function fr(){return this.each(vo)}function cr(t){var e=typeof t=="function"?t:At(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function bo(){return null}function hr(t,e){var r=typeof t=="function"?t:At(t),n=e==null?bo:typeof e=="function"?e:J(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function _o(){var t=this.parentNode;t&&t.removeChild(this)}function pr(){return this.each(_o)}function ko(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function So(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function mr(t){return this.select(t?So:ko)}function dr(t){return arguments.length?this.property("__data__",t):this.node().__data__}function To(t){return function(e){t.call(this,e,this.__data__)}}function Eo(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function Mo(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,o=e.length,a;r<o;++r)a=e[r],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++n]=a;++n?e.length=n:delete this.__on}}}function Io(t,e,r){return function(){var n=this.__on,o,a=To(e);if(n){for(var s=0,i=n.length;s<i;++s)if((o=n[s]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=r),o.value=e;return}}this.addEventListener(t.type,a,r),o={type:t.type,name:t.name,value:e,listener:a,options:r},n?n.push(o):this.__on=[o]}}function gr(t,e,r){var n=Eo(t+""),o,a=n.length,s;if(arguments.length<2){var i=this.node().__on;if(i){for(var u=0,l=i.length,f;u<l;++u)for(o=0,f=i[u];o<a;++o)if((s=n[o]).type===f.type&&s.name===f.name)return f.value}return}for(i=e?Io:Mo,o=0;o<a;++o)this.each(i(n[o],e,r));return this}function yr(t,e,r){var n=Lt(t),o=n.CustomEvent;typeof o=="function"?o=new o(e,r):(o=n.document.createEvent("Event"),r?(o.initEvent(e,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function Ao(t,e){return function(){return yr(this,t,e)}}function Co(t,e){return function(){return yr(this,t,e.apply(this,arguments))}}function xr(t,e){return this.each((typeof e=="function"?Co:Ao)(t,e))}function*wr(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],o=0,a=n.length,s;o<a;++o)(s=n[o])&&(yield s)}var oe=[null];function _(t,e){this._groups=t,this._parents=e}function vr(){return new _([[document.documentElement]],oe)}function No(){return this}_.prototype=vr.prototype={constructor:_,select:Re,selectAll:Pe,selectChild:Oe,selectChildren:Be,filter:De,data:Ye,enter:He,exit:Fe,join:$e,merge:We,selection:No,order:Xe,sort:Ve,call:Ge,nodes:Ke,node:Je,size:Ue,empty:Ze,each:Qe,attr:je,style:tr,property:er,classed:ar,text:sr,html:ur,raise:lr,lower:fr,append:cr,insert:hr,remove:pr,clone:mr,datum:dr,on:gr,dispatch:xr,[Symbol.iterator]:wr};var H=vr;function ie(t){return typeof t=="string"?new _([[document.querySelector(t)]],[document.documentElement]):new _([[t]],oe)}function zt(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function ae(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function pt(){}var ct=.7,Ot=1/ct,tt="\\s*([+-]?\\d+)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",P="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Lo=/^#([0-9a-f]{3,8})$/,zo=new RegExp(`^rgb\\(${tt},${tt},${tt}\\)$`),Ro=new RegExp(`^rgb\\(${P},${P},${P}\\)$`),Po=new RegExp(`^rgba\\(${tt},${tt},${tt},${ht}\\)$`),Oo=new RegExp(`^rgba\\(${P},${P},${P},${ht}\\)$`),Bo=new RegExp(`^hsl\\(${ht},${P},${P}\\)$`),Do=new RegExp(`^hsla\\(${ht},${P},${P},${ht}\\)$`),br={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zt(pt,F,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_r,formatHex:_r,formatHex8:Ho,formatHsl:qo,formatRgb:kr,toString:kr});function _r(){return this.rgb().formatHex()}function Ho(){return this.rgb().formatHex8()}function qo(){return Ar(this).formatHsl()}function kr(){return this.rgb().formatRgb()}function F(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Lo.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Sr(e):r===3?new A(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Rt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Rt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=zo.exec(t))?new A(e[1],e[2],e[3],1):(e=Ro.exec(t))?new A(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Po.exec(t))?Rt(e[1],e[2],e[3],e[4]):(e=Oo.exec(t))?Rt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Bo.exec(t))?Mr(e[1],e[2]/100,e[3]/100,1):(e=Do.exec(t))?Mr(e[1],e[2]/100,e[3]/100,e[4]):br.hasOwnProperty(t)?Sr(br[t]):t==="transparent"?new A(NaN,NaN,NaN,0):null}function Sr(t){return new A(t>>16&255,t>>8&255,t&255,1)}function Rt(t,e,r,n){return n<=0&&(t=e=r=NaN),new A(t,e,r,n)}function Yo(t){return t instanceof pt||(t=F(t)),t?(t=t.rgb(),new A(t.r,t.g,t.b,t.opacity)):new A}function et(t,e,r,n){return arguments.length===1?Yo(t):new A(t,e,r,n==null?1:n)}function A(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}zt(A,et,ae(pt,{brighter(t){return t=t==null?Ot:Math.pow(Ot,t),new A(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ct:Math.pow(ct,t),new A(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new A(Z(this.r),Z(this.g),Z(this.b),Bt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tr,formatHex:Tr,formatHex8:Fo,formatRgb:Er,toString:Er}));function Tr(){return`#${U(this.r)}${U(this.g)}${U(this.b)}`}function Fo(){return`#${U(this.r)}${U(this.g)}${U(this.b)}${U((isNaN(this.opacity)?1:this.opacity)*255)}`}function Er(){let t=Bt(this.opacity);return`${t===1?"rgb(":"rgba("}${Z(this.r)}, ${Z(this.g)}, ${Z(this.b)}${t===1?")":`, ${t})`}`}function Bt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Z(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function U(t){return t=Z(t),(t<16?"0":"")+t.toString(16)}function Mr(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new R(t,e,r,n)}function Ar(t){if(t instanceof R)return new R(t.h,t.s,t.l,t.opacity);if(t instanceof pt||(t=F(t)),!t)return new R;if(t instanceof R)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,o=Math.min(e,r,n),a=Math.max(e,r,n),s=NaN,i=a-o,u=(a+o)/2;return i?(e===a?s=(r-n)/i+(r<n)*6:r===a?s=(n-e)/i+2:s=(e-r)/i+4,i/=u<.5?a+o:2-a-o,s*=60):i=u>0&&u<1?0:s,new R(s,i,u,t.opacity)}function Cr(t,e,r,n){return arguments.length===1?Ar(t):new R(t,e,r,n==null?1:n)}function R(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}zt(R,Cr,ae(pt,{brighter(t){return t=t==null?Ot:Math.pow(Ot,t),new R(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ct:Math.pow(ct,t),new R(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,o=2*r-n;return new A(se(t>=240?t-240:t+120,o,n),se(t,o,n),se(t<120?t+240:t-120,o,n),this.opacity)},clamp(){return new R(Ir(this.h),Pt(this.s),Pt(this.l),Bt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=Bt(this.opacity);return`${t===1?"hsl(":"hsla("}${Ir(this.h)}, ${Pt(this.s)*100}%, ${Pt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ir(t){return t=(t||0)%360,t<0?t+360:t}function Pt(t){return Math.max(0,Math.min(1,t||0))}function se(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}function ue(t,e,r,n,o){var a=t*t,s=a*t;return((1-3*t+3*a-s)*e+(4-6*a+3*s)*r+(1+3*t+3*a-3*s)*n+s*o)/6}function Nr(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),o=t[n],a=t[n+1],s=n>0?t[n-1]:2*o-a,i=n<e-1?t[n+2]:2*a-o;return ue((r-n/e)*e,s,o,a,i)}}function Lr(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),o=t[(n+e-1)%e],a=t[n%e],s=t[(n+1)%e],i=t[(n+2)%e];return ue((r-n/e)*e,o,a,s,i)}}var le=t=>()=>t;function $o(t,e){return function(r){return t+r*e}}function Wo(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function zr(t){return(t=+t)==1?Dt:function(e,r){return r-e?Wo(e,r,t):le(isNaN(e)?r:e)}}function Dt(t,e){var r=e-t;return r?$o(t,r):le(isNaN(t)?e:t)}var $=function t(e){var r=zr(e);function n(o,a){var s=r((o=et(o)).r,(a=et(a)).r),i=r(o.g,a.g),u=r(o.b,a.b),l=Dt(o.opacity,a.opacity);return function(f){return o.r=s(f),o.g=i(f),o.b=u(f),o.opacity=l(f),o+""}}return n.gamma=t,n}(1);function Rr(t){return function(e){var r=e.length,n=new Array(r),o=new Array(r),a=new Array(r),s,i;for(s=0;s<r;++s)i=et(e[s]),n[s]=i.r||0,o[s]=i.g||0,a[s]=i.b||0;return n=t(n),o=t(o),a=t(a),i.opacity=1,function(u){return i.r=n(u),i.g=o(u),i.b=a(u),i+""}}}var Xo=Rr(Nr),Vo=Rr(Lr);function z(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var ce=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fe=new RegExp(ce.source,"g");function Go(t){return function(){return t}}function Ko(t){return function(e){return t(e)+""}}function he(t,e){var r=ce.lastIndex=fe.lastIndex=0,n,o,a,s=-1,i=[],u=[];for(t=t+"",e=e+"";(n=ce.exec(t))&&(o=fe.exec(e));)(a=o.index)>r&&(a=e.slice(r,a),i[s]?i[s]+=a:i[++s]=a),(n=n[0])===(o=o[0])?i[s]?i[s]+=o:i[++s]=o:(i[++s]=null,u.push({i:s,x:z(n,o)})),r=fe.lastIndex;return r<e.length&&(a=e.slice(r),i[s]?i[s]+=a:i[++s]=a),i.length<2?u[0]?Ko(u[0].x):Go(e):(e=u.length,function(l){for(var f=0,h;f<e;++f)i[(h=u[f]).i]=h.x(l);return i.join("")})}var Pr=180/Math.PI,Ht={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pe(t,e,r,n,o,a){var s,i,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*r+e*n)&&(r-=t*u,n-=e*u),(i=Math.sqrt(r*r+n*n))&&(r/=i,n/=i,u/=i),t*n<e*r&&(t=-t,e=-e,u=-u,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(e,t)*Pr,skewX:Math.atan(u)*Pr,scaleX:s,scaleY:i}}var qt;function Or(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ht:pe(e.a,e.b,e.c,e.d,e.e,e.f)}function Br(t){return t==null?Ht:(qt||(qt=document.createElementNS("http://www.w3.org/2000/svg","g")),qt.setAttribute("transform",t),(t=qt.transform.baseVal.consolidate())?(t=t.matrix,pe(t.a,t.b,t.c,t.d,t.e,t.f)):Ht)}function Dr(t,e,r,n){function o(l){return l.length?l.pop()+" ":""}function a(l,f,h,d,p,m){if(l!==h||f!==d){var c=p.push("translate(",null,e,null,r);m.push({i:c-4,x:z(l,h)},{i:c-2,x:z(f,d)})}else(h||d)&&p.push("translate("+h+e+d+r)}function s(l,f,h,d){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),d.push({i:h.push(o(h)+"rotate(",null,n)-2,x:z(l,f)})):f&&h.push(o(h)+"rotate("+f+n)}function i(l,f,h,d){l!==f?d.push({i:h.push(o(h)+"skewX(",null,n)-2,x:z(l,f)}):f&&h.push(o(h)+"skewX("+f+n)}function u(l,f,h,d,p,m){if(l!==h||f!==d){var c=p.push(o(p)+"scale(",null,",",null,")");m.push({i:c-4,x:z(l,h)},{i:c-2,x:z(f,d)})}else(h!==1||d!==1)&&p.push(o(p)+"scale("+h+","+d+")")}return function(l,f){var h=[],d=[];return l=t(l),f=t(f),a(l.translateX,l.translateY,f.translateX,f.translateY,h,d),s(l.rotate,f.rotate,h,d),i(l.skewX,f.skewX,h,d),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,h,d),l=f=null,function(p){for(var m=-1,c=d.length,g;++m<c;)h[(g=d[m]).i]=g.x(p);return h.join("")}}}var me=Dr(Or,"px, ","px)","deg)"),de=Dr(Br,", ",")",")");var rt=0,dt=0,mt=0,qr=1e3,Yt,gt,Ft=0,Q=0,$t=0,yt=typeof performance=="object"&&performance.now?performance:Date,Yr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function wt(){return Q||(Yr(Jo),Q=yt.now()+$t)}function Jo(){Q=0}function xt(){this._call=this._time=this._next=null}xt.prototype=nt.prototype={constructor:xt,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?wt():+r)+(e==null?0:+e),!this._next&&gt!==this&&(gt?gt._next=this:Yt=this,gt=this),this._call=t,this._time=r,ge()},stop:function(){this._call&&(this._call=null,this._time=1/0,ge())}};function nt(t,e,r){var n=new xt;return n.restart(t,e,r),n}function Fr(){wt(),++rt;for(var t=Yt,e;t;)(e=Q-t._time)>=0&&t._call.call(void 0,e),t=t._next;--rt}function Hr(){Q=(Ft=yt.now())+$t,rt=dt=0;try{Fr()}finally{rt=0,Zo(),Q=0}}function Uo(){var t=yt.now(),e=t-Ft;e>qr&&($t-=e,Ft=t)}function Zo(){for(var t,e=Yt,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Yt=r);gt=t,ge(n)}function ge(t){if(!rt){dt&&(dt=clearTimeout(dt));var e=t-Q;e>24?(t<1/0&&(dt=setTimeout(Hr,t-yt.now()-$t)),mt&&(mt=clearInterval(mt))):(mt||(Ft=yt.now(),mt=setInterval(Uo,qr)),rt=1,Yr(Hr))}}function Wt(t,e,r){var n=new xt;return e=e==null?0:+e,n.restart(o=>{n.stop(),t(o+e)},e,r),n}var Qo=st("start","end","cancel","interrupt"),jo=[],Xr=0,$r=1,Vt=2,Xt=3,Wr=4,Gt=5,vt=6;function W(t,e,r,n,o,a){var s=t.__transition;if(!s)t.__transition={};else if(r in s)return;ti(t,r,{name:e,index:n,group:o,on:Qo,tween:jo,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Xr})}function bt(t,e){var r=T(t,e);if(r.state>Xr)throw new Error("too late; already scheduled");return r}function E(t,e){var r=T(t,e);if(r.state>Xt)throw new Error("too late; already running");return r}function T(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function ti(t,e,r){var n=t.__transition,o;n[e]=r,r.timer=nt(a,0,r.time);function a(l){r.state=$r,r.timer.restart(s,r.delay,r.time),r.delay<=l&&s(l-r.delay)}function s(l){var f,h,d,p;if(r.state!==$r)return u();for(f in n)if(p=n[f],p.name===r.name){if(p.state===Xt)return Wt(s);p.state===Wr?(p.state=vt,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete n[f]):+f<e&&(p.state=vt,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete n[f])}if(Wt(function(){r.state===Xt&&(r.state=Wr,r.timer.restart(i,r.delay,r.time),i(l))}),r.state=Vt,r.on.call("start",t,t.__data__,r.index,r.group),r.state===Vt){for(r.state=Xt,o=new Array(d=r.tween.length),f=0,h=-1;f<d;++f)(p=r.tween[f].value.call(t,t.__data__,r.index,r.group))&&(o[++h]=p);o.length=h+1}}function i(l){for(var f=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(u),r.state=Gt,1),h=-1,d=o.length;++h<d;)o[h].call(t,f);r.state===Gt&&(r.on.call("end",t,t.__data__,r.index,r.group),u())}function u(){r.state=vt,r.timer.stop(),delete n[e];for(var l in n)return;delete t.__transition}}function Kt(t,e){var r=t.__transition,n,o,a=!0,s;if(r){e=e==null?null:e+"";for(s in r){if((n=r[s]).name!==e){a=!1;continue}o=n.state>Vt&&n.state<Gt,n.state=vt,n.timer.stop(),n.on.call(o?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[s]}a&&delete t.__transition}}function Vr(t){return this.each(function(){Kt(this,t)})}function ei(t,e){var r,n;return function(){var o=E(this,t),a=o.tween;if(a!==r){n=r=a;for(var s=0,i=n.length;s<i;++s)if(n[s].name===e){n=n.slice(),n.splice(s,1);break}}o.tween=n}}function ri(t,e,r){var n,o;if(typeof r!="function")throw new Error;return function(){var a=E(this,t),s=a.tween;if(s!==n){o=(n=s).slice();for(var i={name:e,value:r},u=0,l=o.length;u<l;++u)if(o[u].name===e){o[u]=i;break}u===l&&o.push(i)}a.tween=o}}function Gr(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=T(this.node(),r).tween,o=0,a=n.length,s;o<a;++o)if((s=n[o]).name===t)return s.value;return null}return this.each((e==null?ei:ri)(r,t,e))}function ot(t,e,r){var n=t._id;return t.each(function(){var o=E(this,n);(o.value||(o.value={}))[e]=r.apply(this,arguments)}),function(o){return T(o,n).value[e]}}function Jt(t,e){var r;return(typeof e=="number"?z:e instanceof F?$:(r=F(e))?(e=r,$):he)(t,e)}function ni(t){return function(){this.removeAttribute(t)}}function oi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ii(t,e,r){var n,o=r+"",a;return function(){var s=this.getAttribute(t);return s===o?null:s===n?a:a=e(n=s,r)}}function ai(t,e,r){var n,o=r+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===n?a:a=e(n=s,r)}}function si(t,e,r){var n,o,a;return function(){var s,i=r(this),u;return i==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=i+"",s===u?null:s===n&&u===o?a:(o=u,a=e(n=s,i)))}}function ui(t,e,r){var n,o,a;return function(){var s,i=r(this),u;return i==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=i+"",s===u?null:s===n&&u===o?a:(o=u,a=e(n=s,i)))}}function Kr(t,e){var r=D(t),n=r==="transform"?de:Jt;return this.attrTween(t,typeof e=="function"?(r.local?ui:si)(r,n,ot(this,"attr."+t,e)):e==null?(r.local?oi:ni)(r):(r.local?ai:ii)(r,n,e))}function li(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function fi(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function ci(t,e){var r,n;function o(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&fi(t,a)),r}return o._value=e,o}function hi(t,e){var r,n;function o(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&li(t,a)),r}return o._value=e,o}function Jr(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=D(t);return this.tween(r,(n.local?ci:hi)(n,e))}function pi(t,e){return function(){bt(this,t).delay=+e.apply(this,arguments)}}function mi(t,e){return e=+e,function(){bt(this,t).delay=e}}function Ur(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?pi:mi)(e,t)):T(this.node(),e).delay}function di(t,e){return function(){E(this,t).duration=+e.apply(this,arguments)}}function gi(t,e){return e=+e,function(){E(this,t).duration=e}}function Zr(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?di:gi)(e,t)):T(this.node(),e).duration}function yi(t,e){if(typeof e!="function")throw new Error;return function(){E(this,t).ease=e}}function Qr(t){var e=this._id;return arguments.length?this.each(yi(e,t)):T(this.node(),e).ease}function xi(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;E(this,t).ease=r}}function jr(t){if(typeof t!="function")throw new Error;return this.each(xi(this._id,t))}function tn(t){typeof t!="function"&&(t=lt(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var a=e[o],s=a.length,i=n[o]=[],u,l=0;l<s;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&i.push(u);return new I(n,this._parents,this._name,this._id)}function en(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,o=r.length,a=Math.min(n,o),s=new Array(n),i=0;i<a;++i)for(var u=e[i],l=r[i],f=u.length,h=s[i]=new Array(f),d,p=0;p<f;++p)(d=u[p]||l[p])&&(h[p]=d);for(;i<n;++i)s[i]=e[i];return new I(s,this._parents,this._name,this._id)}function wi(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function vi(t,e,r){var n,o,a=wi(e)?bt:E;return function(){var s=a(this,t),i=s.on;i!==n&&(o=(n=i).copy()).on(e,r),s.on=o}}function rn(t,e){var r=this._id;return arguments.length<2?T(this.node(),r).on.on(t):this.each(vi(r,t,e))}function bi(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function nn(){return this.on("end.remove",bi(this._id))}function on(t){var e=this._name,r=this._id;typeof t!="function"&&(t=J(t));for(var n=this._groups,o=n.length,a=new Array(o),s=0;s<o;++s)for(var i=n[s],u=i.length,l=a[s]=new Array(u),f,h,d=0;d<u;++d)(f=i[d])&&(h=t.call(f,f.__data__,d,i))&&("__data__"in f&&(h.__data__=f.__data__),l[d]=h,W(l[d],e,r,d,l,T(f,r)));return new I(a,this._parents,e,r)}function an(t){var e=this._name,r=this._id;typeof t!="function"&&(t=ut(t));for(var n=this._groups,o=n.length,a=[],s=[],i=0;i<o;++i)for(var u=n[i],l=u.length,f,h=0;h<l;++h)if(f=u[h]){for(var d=t.call(f,f.__data__,h,u),p,m=T(f,r),c=0,g=d.length;c<g;++c)(p=d[c])&&W(p,e,r,c,d,m);a.push(d),s.push(f)}return new I(a,s,e,r)}var _i=H.prototype.constructor;function sn(){return new _i(this._groups,this._parents)}function ki(t,e){var r,n,o;return function(){var a=Y(this,t),s=(this.style.removeProperty(t),Y(this,t));return a===s?null:a===r&&s===n?o:o=e(r=a,n=s)}}function un(t){return function(){this.style.removeProperty(t)}}function Si(t,e,r){var n,o=r+"",a;return function(){var s=Y(this,t);return s===o?null:s===n?a:a=e(n=s,r)}}function Ti(t,e,r){var n,o,a;return function(){var s=Y(this,t),i=r(this),u=i+"";return i==null&&(u=i=(this.style.removeProperty(t),Y(this,t))),s===u?null:s===n&&u===o?a:(o=u,a=e(n=s,i))}}function Ei(t,e){var r,n,o,a="style."+e,s="end."+a,i;return function(){var u=E(this,t),l=u.on,f=u.value[a]==null?i||(i=un(e)):void 0;(l!==r||o!==f)&&(n=(r=l).copy()).on(s,o=f),u.on=n}}function ln(t,e,r){var n=(t+="")=="transform"?me:Jt;return e==null?this.styleTween(t,ki(t,n)).on("end.style."+t,un(t)):typeof e=="function"?this.styleTween(t,Ti(t,n,ot(this,"style."+t,e))).each(Ei(this._id,t)):this.styleTween(t,Si(t,n,e),r).on("end.style."+t,null)}function Mi(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function Ii(t,e,r){var n,o;function a(){var s=e.apply(this,arguments);return s!==o&&(n=(o=s)&&Mi(t,s,r)),n}return a._value=e,a}function fn(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,Ii(t,e,r==null?"":r))}function Ai(t){return function(){this.textContent=t}}function Ci(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function cn(t){return this.tween("text",typeof t=="function"?Ci(ot(this,"text",t)):Ai(t==null?"":t+""))}function Ni(t){return function(e){this.textContent=t.call(this,e)}}function Li(t){var e,r;function n(){var o=t.apply(this,arguments);return o!==r&&(e=(r=o)&&Ni(o)),e}return n._value=t,n}function hn(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Li(t))}function pn(){for(var t=this._name,e=this._id,r=Ut(),n=this._groups,o=n.length,a=0;a<o;++a)for(var s=n[a],i=s.length,u,l=0;l<i;++l)if(u=s[l]){var f=T(u,e);W(u,t,r,l,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new I(n,this._parents,t,r)}function mn(){var t,e,r=this,n=r._id,o=r.size();return new Promise(function(a,s){var i={value:s},u={value:function(){--o===0&&a()}};r.each(function(){var l=E(this,n),f=l.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(i),e._.interrupt.push(i),e._.end.push(u)),l.on=e}),o===0&&a()})}var zi=0;function I(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function dn(t){return H().transition(t)}function Ut(){return++zi}var q=H.prototype;I.prototype=dn.prototype={constructor:I,select:on,selectAll:an,selectChild:q.selectChild,selectChildren:q.selectChildren,filter:tn,merge:en,selection:sn,transition:pn,call:q.call,nodes:q.nodes,node:q.node,size:q.size,empty:q.empty,each:q.each,on:rn,attr:Kr,attrTween:Jr,style:ln,styleTween:fn,text:cn,textTween:hn,remove:nn,tween:Gr,delay:Ur,duration:Zr,ease:Qr,easeVarying:jr,end:mn,[Symbol.iterator]:q[Symbol.iterator]};function Zt(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ri={time:null,delay:0,duration:250,ease:Zt};function Pi(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function gn(t){var e,r;t instanceof I?(e=t._id,t=t._name):(e=Ut(),(r=Ri).time=wt(),t=t==null?null:t+"");for(var n=this._groups,o=n.length,a=0;a<o;++a)for(var s=n[a],i=s.length,u,l=0;l<i;++l)(u=s[l])&&W(u,t,e,l,s,r||Pi(u,e));return new I(n,this._parents,t,e)}H.prototype.interrupt=Vr;H.prototype.transition=gn;var{abs:oc,max:ic,min:ac}=Math;function yn(t){return[+t[0],+t[1]]}function Oi(t){return[yn(t[0]),yn(t[1])]}var sc={name:"x",handles:["w","e"].map(ye),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},uc={name:"y",handles:["n","s"].map(ye),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},lc={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ye),input:function(t){return t==null?null:Oi(t)},output:function(t){return t}};function ye(t){return{type:t}}function O(t){return function(){return t}}function xn(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}var Bi=10,Di=Math.PI*(3-Math.sqrt(5));function xe(t){var e,r=1,n=.001,o=1-Math.pow(n,1/300),a=0,s=.6,i=new Map,u=nt(h),l=st("tick","end"),f=xn();t==null&&(t=[]);function h(){d(),l.call("tick",e),r<n&&(u.stop(),l.call("end",e))}function d(c){var g,y=t.length,x;c===void 0&&(c=1);for(var w=0;w<c;++w)for(r+=(a-r)*o,i.forEach(function(S){S(r)}),g=0;g<y;++g)x=t[g],x.fx==null?x.x+=x.vx*=s:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=s:(x.y=x.fy,x.vy=0);return e}function p(){for(var c=0,g=t.length,y;c<g;++c){if(y=t[c],y.index=c,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var x=Bi*Math.sqrt(.5+c),w=c*Di;y.x=x*Math.cos(w),y.y=x*Math.sin(w)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function m(c){return c.initialize&&c.initialize(t,f),c}return p(),e={tick:d,restart:function(){return u.restart(h),e},stop:function(){return u.stop(),e},nodes:function(c){return arguments.length?(t=c,p(),i.forEach(m),e):t},alpha:function(c){return arguments.length?(r=+c,e):r},alphaMin:function(c){return arguments.length?(n=+c,e):n},alphaDecay:function(c){return arguments.length?(o=+c,e):+o},alphaTarget:function(c){return arguments.length?(a=+c,e):a},velocityDecay:function(c){return arguments.length?(s=1-c,e):1-s},randomSource:function(c){return arguments.length?(f=c,i.forEach(m),e):f},force:function(c,g){return arguments.length>1?(g==null?i.delete(c):i.set(c,m(g)),e):i.get(c)},find:function(c,g,y){var x=0,w=t.length,S,k,C,b,N;for(y==null?y=1/0:y*=y,x=0;x<w;++x)b=t[x],S=c-b.x,k=g-b.y,C=S*S+k*k,C<y&&(N=b,y=C);return N},on:function(c,g){return arguments.length>1?(l.on(c,g),e):l.on(c)}}}function we(t){var e=O(.1),r,n,o;typeof t!="function"&&(t=O(t==null?0:+t));function a(i){for(var u=0,l=r.length,f;u<l;++u)f=r[u],f.vx+=(o[u]-f.x)*n[u]*i}function s(){if(r){var i,u=r.length;for(n=new Array(u),o=new Array(u),i=0;i<u;++i)n[i]=isNaN(o[i]=+t(r[i],i,r))?0:+e(r[i],i,r)}}return a.initialize=function(i){r=i,s()},a.strength=function(i){return arguments.length?(e=typeof i=="function"?i:O(+i),s(),a):e},a.x=function(i){return arguments.length?(t=typeof i=="function"?i:O(+i),s(),a):t},a}function ve(t){var e=O(.1),r,n,o;typeof t!="function"&&(t=O(t==null?0:+t));function a(i){for(var u=0,l=r.length,f;u<l;++u)f=r[u],f.vy+=(o[u]-f.y)*n[u]*i}function s(){if(r){var i,u=r.length;for(n=new Array(u),o=new Array(u),i=0;i<u;++i)n[i]=isNaN(o[i]=+t(r[i],i,r))?0:+e(r[i],i,r)}}return a.initialize=function(i){r=i,s()},a.strength=function(i){return arguments.length?(e=typeof i=="function"?i:O(+i),s(),a):e},a.y=function(i){return arguments.length?(t=typeof i=="function"?i:O(+i),s(),a):t},a}function X(t,e,r){this.k=t,this.x=e,this.y=r}X.prototype={constructor:X,scale:function(t){return t===1?this:new X(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new X(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var be=new X(1,0,0);_e.prototype=X.prototype;function _e(t){for(;!t.__zoom;)if(!(t=t.parentNode))return be;return t.__zoom}var Hi=Math.PI*2,vn=t=>{let e=[],r=n=>{var a,s;let o=t*n;for(let i of e)i.vx=((a=i.vx)!=null?a:0)+(Math.random()-.5)*o,i.vy=((s=i.vy)!=null?s:0)+(Math.random()-.5)*o};return r.initialize=n=>{e=n},r},it=(t,e)=>t+Math.random()*(e-t),_t=(t,e)=>{if(!t)return e;let r=Number.parseFloat(t);return Number.isFinite(r)?r:e},qi=(t,e)=>{if(!t)return e;let r=Number.parseInt(t,10);return Number.isFinite(r)?r:e},Yi=t=>{var o;let r=t.trim().match(/^(-?\d*\.?\d+)(px|dvh|dwh|dvw|vh|vw|%)?$/);if(!r)return null;let n=Number(r[1]);return Number.isFinite(n)?{value:n,unit:(o=r[2])!=null?o:"px"}:null},ke=t=>{let e=Yi(t);if(!e)return null;switch(e.unit){case"px":return e.value;case"dvh":case"dwh":case"vh":return window.innerHeight*e.value/100;case"dvw":case"vw":return window.innerWidth*e.value/100;case"%":return Math.min(window.innerWidth,window.innerHeight)*e.value/100;default:return null}},bn=()=>{let t=$(v.colorSampler.grayStart,v.colorSampler.grayEnd),e=$(v.colorSampler.redStart,v.colorSampler.redEnd);return()=>{let r=Math.random();return r<v.colorSampler.grayChance?t(Math.random()):r<v.colorSampler.redChance?e(Math.random()):$(t(Math.random()),e(Math.random()))(Math.random())}},Qt=t=>({count:qi(t.dataset.count,v.defaultLayer.count),sizeMin:_t(t.dataset.sizeMin,v.defaultLayer.sizeMin),sizeMax:_t(t.dataset.sizeMax,v.defaultLayer.sizeMax),jitter:_t(t.dataset.jitter,v.defaultLayer.jitter),speed:_t(t.dataset.speed,v.motion.defaultSpeed),shrink:_t(t.dataset.shrink,v.motion.defaultShrink)});var Se=()=>Math.random()*Hi;var _n=t=>{let e=Math.max(1,t.clientWidth),r=Math.max(1,t.clientHeight),{count:n,sizeMin:o,sizeMax:a,jitter:s}=Qt(t),i=ie(t).selectAll("svg").data([null]).join("svg").attr("class",v.svgClassName).attr("width",e).attr("height",r).attr("viewBox",`0 0 ${e} ${r}`).attr("preserveAspectRatio","none"),u=bn(),l=Et(n).map(()=>({x:Math.random()*e,y:Math.random()*r,r:it(o,a),color:u(),opacity:it(v.defaults.opacityMin,v.defaults.opacityMax),orbitRadiusPx:it(v.orbit.radiusPxMin,v.orbit.radiusPxMax),orbitSpeedRad:it(v.orbit.speedRadMin,v.orbit.speedRadMax),orbitPhase:Se(),orbitWobbleSpeedRad:it(v.orbit.wobbleSpeedRadMin,v.orbit.wobbleSpeedRadMax),orbitWobblePhase:Se()})),f=i.selectAll("circle").data(l).join("circle").attr("r",x=>x.r).attr("fill",x=>x.color).attr("opacity",x=>x.opacity).attr("cx",0).attr("cy",0),h=v.padding,d=0,p=0,m=()=>{d=0;let x=p;for(let w of l)w.x<-h&&(w.x=e+h),w.x>e+h&&(w.x=-h),w.y<-h&&(w.y=r+h),w.y>r+h&&(w.y=-h);f.attr("transform",w=>{let S=w.orbitPhase+w.orbitSpeedRad*x,k=.75+.25*Math.sin(w.orbitWobblePhase+w.orbitWobbleSpeedRad*x),C=w.orbitRadiusPx*k,b=Math.cos(S)*C,N=Math.sin(S)*C;return`translate(${w.x+b}, ${w.y+N})`})},c=()=>{d||(d=requestAnimationFrame(m))},g=xe(l).force("x",we(e/2).strength(v.simulation.forceStrength)).force("y",ve(r/2).strength(v.simulation.forceStrength)).force("jitter",vn(s)).velocityDecay(v.simulation.velocityDecay).alpha(v.simulation.alpha).alphaDecay(v.simulation.alphaDecay).on("tick",()=>{p=performance.now()/1e3,c()});return{layer:t,simulation:g,destroy:()=>{d&&(cancelAnimationFrame(d),d=0)}}};var kn=()=>{let t=document.querySelector(v.containerSelector);if(!t)return;let e=window.matchMedia("(prefers-reduced-motion: reduce)"),r=Array.from(t.querySelectorAll(v.layerSelector));if(r.length===0)return;let n=new Map,o=null,a=c=>{e.matches||c.running||(c.simulation.alpha(v.simulation.alpha).restart(),c.running=!0)},s=c=>{c.running&&(c.simulation.stop(),c.running=!1)},i=()=>{let c=Math.max(1,document.documentElement.scrollHeight-window.innerHeight);return Math.min(1,Math.max(0,window.scrollY/c))},u={start:null,end:null},l=()=>{u.start=ke(v.containerSize.start),u.end=ke(v.containerSize.end)},f=c=>{if(u.start===null||u.end===null)return;let g=u.start+(u.end-u.start)*c;t.style.setProperty("--parallax-size",`${Math.max(0,g)}px`)},h=()=>{l(),f(i());for(let c of n.values())s(c),c.destroy();n.clear();for(let c of r){let g=c.querySelector("svg");g&&g.remove();let y=_n(c),x=!e.matches;x||y.simulation.stop(),n.set(c,{...y,isVisible:!0,running:x})}d()},d=()=>{o&&o.disconnect(),o=new IntersectionObserver(c=>{for(let g of c){let y=g.target,x=n.get(y);x&&(x.isVisible=g.isIntersecting,g.isIntersecting?a(x):s(x))}},{root:null,rootMargin:"200px",threshold:.01});for(let c of r)o.observe(c)},p=(()=>{let c=!1,g=window.scrollY,y=()=>{let x=i();f(x);let w=v.motion.maxShrink,S=r[r.length-1];for(let k of r){let{speed:C,shrink:b}=Qt(k),N=k===S?0:b,V=1-x*w*N;k.style.transform=`translate3d(0, ${g*C}px, 0) scale(${V})`}c=!1};return()=>{g=window.scrollY,c||(c=!0,requestAnimationFrame(y))}})(),m=(()=>{let c=0;return()=>{c&&cancelAnimationFrame(c),c=requestAnimationFrame(()=>{h(),p()})}})();h(),p(),window.addEventListener("scroll",p,{passive:!0}),window.addEventListener("resize",m),e.addEventListener("change",h)};function Sn(){let t=L(M.headerLogoButton);if(!t)return;t.setAttribute("aria-pressed","false");let e=n=>{t.classList.toggle("is-expanded",n),t.setAttribute("aria-pressed",String(n))},r=()=>{t.classList.add("is-collapsing"),e(!1);let n=!1,o=()=>{n||(n=!0,t.classList.remove("is-collapsing"))},a=s=>{s.propertyName==="transform"&&o()};t.addEventListener("transitionend",a,{once:!0}),window.setTimeout(o,260)};t.addEventListener("click",()=>{t.classList.contains("is-expanded")?r():(t.classList.remove("is-collapsing"),e(!0))})}function Tn(){let t=L(M.storeMain);if(!t)return;let e=()=>{let r=window.scrollY<=1;t.classList.toggle("is-hidden",!r)};window.addEventListener("scroll",e,{passive:!0}),e()}function En(){let t=L(M.protocolText),e=St(M.glitchLetters);if(e.length===0)return;let r=t?Array.from(t.querySelectorAll(".main-text-row .glitch-letter")):[],n=80,o=(p="")=>{if(K.glitchCharacters.length===0)return p;let m=p;for(;m===p;){let c=Math.floor(Math.random()*K.glitchCharacters.length);m=K.glitchCharacters[c]}return m},a=()=>{let p=0,m=18,c=Array.from({length:e.length},(y,x)=>x+4),g=window.setInterval(()=>{p++,e.forEach((y,x)=>{let w=y.dataset.final||y.textContent||"";p<c[x]?y.textContent=o():y.textContent=w}),p>m+e.length&&window.clearInterval(g)},n)};e.forEach(p=>{p.dataset.final=p.textContent||""}),a(),t&&t.addEventListener("click",a);let s=!1,i,u,l,f=-1,h=p=>{if(s)return;if(r.length===0){p();return}s=!0,i&&(window.clearTimeout(i),i=void 0),u&&(window.clearInterval(u),u=void 0);let m=Math.floor(Math.random()*r.length);if(r.length>1){let y=0;for(;m===f&&y<10;)m=Math.floor(Math.random()*r.length),y+=1}f=m;let c=r[m],g=c.dataset.final||c.textContent||"";if(!g){s=!1,p();return}c.textContent=o(g),i=window.setTimeout(()=>{u=window.setInterval(()=>{let y=o();c.textContent=y},n),i=window.setTimeout(()=>{u&&(window.clearInterval(u),u=void 0),c.textContent=g,s=!1,p()},1e3)},1e3)},d=()=>{l&&window.clearTimeout(l);let p=5e3+Math.random()*1e4;l=window.setTimeout(()=>{h(d)},p)};d()}var Mn=()=>{En(),Ce(),Tn(),Ne(),Ae(),Sn(),kn()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Mn,{once:!0}):Mn();})();
